<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <title>AR Saturnus — Hiro Marker</title>
  <!-- A-Frame -->
  <script src="https://aframe.io/releases/1.4.1/aframe.min.js"></script>
  <!-- AR.js for A-Frame (marker-based) -->
  <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar.js"></script>
  <style>
    html,body{height:100%;margin:0;overflow:hidden;font-family:system-ui,Segoe UI,Roboto}
    
    /* UI Mobile-friendly */
    #ui{
      position:fixed;
      left:0;
      top:0;
      right:0;
      z-index:10;
      background:rgba(0,0,0,0.75);
      color:#fff;
      padding:12px;
      border-radius:0 0 12px 12px;
      backdrop-filter: blur(5px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }
    
    #ui h1{
      font-size:18px;
      margin:0 0 8px;
      text-align:center;
    }
    
    #ui p{
      margin:6px 0;
      font-size:14px;
      line-height:1.4;
      text-align:center;
    }
    
    #ui button{
      display:block;
      width:100%;
      margin-top:8px;
      padding:10px;
      border-radius:8px;
      border:0;
      background:#FF9800;
      color:#fff;
      font-weight:bold;
      font-size:14px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }
    
    #ui button:active{
      background:#F57C00;
      transform: translateY(1px);
    }
    
    /* Planet info panel */
    #planetInfo{
      position:fixed;
      bottom:0;
      left:0;
      right:0;
      background:rgba(0,0,0,0.85);
      color:#fff;
      padding:12px;
      border-radius:12px 12px 0 0;
      backdrop-filter: blur(5px);
      transform: translateY(100%);
      transition: transform 0.3s ease;
      z-index:9;
    }
    
    #planetInfo.show{
      transform: translateY(0);
    }
    
    #planetInfo h2{
      margin:0 0 8px;
      font-size:16px;
      text-align:center;
    }
    
    #planetInfo p{
      margin:4px 0;
      font-size:13px;
      line-height:1.4;
    }
    
    /* Loading indicator */
    #loading{
      position:fixed;
      top:0;
      left:0;
      width:100%;
      height:100%;
      background:#000;
      color:#fff;
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      z-index:100;
    }
    
    #loading.hide{
      display:none;
    }
    
    .spinner{
      width:40px;
      height:40px;
      border:4px solid rgba(255,255,255,0.3);
      border-radius:50%;
      border-top-color:#FF9800;
      animation:spin 1s linear infinite;
      margin-bottom:15px;
    }
    
    @keyframes spin{
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* Responsive adjustments */
    @media (min-width: 768px) {
      #ui{
        left:12px;
        top:12px;
        right:auto;
        width:280px;
        border-radius:8px;
      }
      
      #planetInfo{
        left:12px;
        bottom:12px;
        right:auto;
        width:280px;
        border-radius:8px;
      }
    }
  </style>
</head>
<body>
  <!-- Loading screen -->
  <div id="loading">
    <div class="spinner"></div>
    <p>Memuat Saturnus AR...</p>
  </div>

  <!-- UI Panel -->
  <div id="ui">
    <h1>♄ Saturnus AR</h1>
    <p>Arahkan kamera ke <strong>Hiro marker</strong> untuk melihat Saturnus.</p>
    <p>Tips: letakkan marker di meja, perlahan miringkan kamera untuk melihat detail.</p>
    <button id="toggleInfo">Info Saturnus</button>
  </div>

  <!-- Planet Info Panel -->
  <div id="planetInfo">
    <h2 id="planetName">Saturnus</h2>
    <p id="planetDesc">Raksasa Gas dengan Cincin Debu</p>
    <p id="planetFacts">Diameter: 116,460 km<br>Jarak dari Matahari: 1.4 miliar km<br>Periode Orbit: 29.5 tahun</p>
  </div>

  <!-- A-Frame scene with AR.js enabled -->
  <a-scene vr-mode-ui="enabled: false" embedded arjs="sourceType: webcam; debugUIEnabled: false;">

    <!-- Ambient + directional light -->
    <a-entity light="type: ambient; intensity: 0.6"></a-entity>
    <a-entity light="type: directional; intensity: 0.8" position="1 2 1"></a-entity>

    <!-- Marker (Hiro) -->
    <a-marker preset="hiro">
      <!-- Root of the saturn system attached to the marker -->
      <a-entity id="saturnRoot" rotation="0 0 0">

        <!-- Saturn planet -->
        <a-entity id="saturn" position="0 0 0" 
                  class="planet" data-name="Saturnus" 
                  data-desc="Raksasa Gas dengan Cincin Debu"
                  data-facts="Diameter: 116,460 km<br>Jarak dari Matahari: 1.4 miliar km<br>Periode Orbit: 29.5 tahun<br>Suhu: -178°C<br>Satelit: 146+ (termasuk Titan)">
          <!-- Saturn sphere dengan texture saturnus-texture.jpg -->
          <a-sphere radius="0.6" 
                    material="color: #FFFFFF;
                              roughness: 0.9; 
                              metalness: 0.1;
                              src: url(saturnus-texture.jpg);
                              repeat: 1 1"
                    animation="property: rotation; to: 0 360 0; loop: true; dur: 10000; easing: linear">
          </a-sphere>
          
          <!-- Cincin Debu Saturnus - Lebih Transparan dan Tersebar -->
          <a-torus radius="1.2" radius-tubular="0.008" arc="360" 
                   rotation="0 0 65"
                   material="color: #C9B37E; side: double; transparent: true; opacity: 0.4"
                   animation="property: rotation; to: 0 360 0; loop: true; dur: 15000; easing: linear">
          </a-torus>
          
          <!-- Partikel debu tambahan untuk efek yang lebih realistis -->
          <a-entity id="dustParticles">
            <!-- Partikel debu kecil di sekitar cincin -->
            <a-sphere radius="0.003" position="1.0 0.02 0" material="color: #D7C9A5; transparent: true; opacity: 0.6"></a-sphere>
            <a-sphere radius="0.002" position="1.3 -0.01 0" material="color: #E5D8B5; transparent: true; opacity: 0.5"></a-sphere>
            <a-sphere radius="0.004" position="0.8 0.015 0" material="color: #C9B37E; transparent: true; opacity: 0.7"></a-sphere>
            <a-sphere radius="0.002" position="1.1 -0.025 0" material="color: #D7C9A5; transparent: true; opacity: 0.4"></a-sphere>
            <a-sphere radius="0.003" position="1.4 0.03 0" material="color: #E5D8B5; transparent: true; opacity: 0.6"></a-sphere>
          </a-entity>
        </a-entity>

        <!-- Bulan Saturnus - Titan -->
        <a-entity id="titanOrbit" animation="property: rotation; to: 0 360 0; loop: true; dur: 4000; easing: linear">
          <a-sphere radius="0.08" position="1.8 0 0" 
                    material="color: #A9A9A9; roughness: 1.0"
                    class="moon" data-name="Titan" 
                    data-desc="Bulan terbesar Saturnus"
                    data-facts="Diameter: 5,150 km<br>Satu-satunya bulan dengan atmosfer<br>Jarak: 1.2 juta km">
          </a-sphere>
        </a-entity>

        <!-- Bulan Saturnus - Enceladus -->
        <a-entity id="enceladusOrbit" animation="property: rotation; to: 0 -360 0; loop: true; dur: 6000; easing: linear">
          <a-sphere radius="0.04" position="2.3 0 0" 
                    material="color: #F5F5F5; roughness: 1.0"
                    class="moon" data-name="Enceladus" 
                    data-desc="Bulan es dengan geyser"
                    data-facts="Diameter: 504 km<br>Permukaan: Es bersih<br>Jarak: 238,000 km">
          </a-sphere>
        </a-entity>

        <!-- Bulan Saturnus - Mimas -->
        <a-entity id="mimasOrbit" animation="property: rotation; to: 0 360 0; loop: true; dur: 8000; easing: linear">
          <a-sphere radius="0.03" position="2.8 0 0" 
                    material="color: #C0C0C0; roughness: 1.0"
                    class="moon" data-name="Mimas" 
                    data-desc="Bulan dengan kawah besar"
                    data-facts="Diameter: 396 km<br>Dijuluki 'Death Star'<br>Jarak: 185,000 km">
          </a-sphere>
        </a-entity>

        <!-- Bulan Saturnus - Rhea -->
        <a-entity id="rheaOrbit" animation="property: rotation; to: 0 -360 0; loop: true; dur: 12000; easing: linear">
          <a-sphere radius="0.06" position="3.3 0 0" 
                    material="color: #D3D3D3; roughness: 1.0"
                    class="moon" data-name="Rhea" 
                    data-desc="Bulan es kedua terbesar Saturnus"
                    data-facts="Diameter: 1,528 km<br>Permukaan: Es dan batuan<br>Jarak: 527,000 km">
          </a-sphere>
        </a-entity>

        <!-- Background stars -->
        <a-entity id="stars">
          <!-- Multiple small spheres as stars -->
          <a-sphere radius="0.008" position="1.2 0.9 0.6" material="color: white; emissive: white"></a-sphere>
          <a-sphere radius="0.006" position="-1.0 0.7 0.8" material="color: white; emissive: white"></a-sphere>
          <a-sphere radius="0.01" position="0.8 -0.6 -1.1" material="color: white; emissive: white"></a-sphere>
          <a-sphere radius="0.007" position="-0.6 -0.8 0.5" material="color: white; emissive: white"></a-sphere>
          <a-sphere radius="0.009" position="1.1 -0.4 1.0" material="color: white; emissive: white"></a-sphere>
          <a-sphere radius="0.005" position="-1.1 0.5 -0.7" material="color: white; emissive: white"></a-sphere>
        </a-entity>

        <!-- Informasi label -->
        <a-entity position="0 1.5 0" text="value: SATURNUS; align: center; color: #FF9800; width: 3" 
                 visible="false" class="label">
        </a-entity>

      </a-entity>
    </a-marker>

    <!-- Camera -->
    <a-entity camera></a-entity>
  </a-scene>

  <script>
    // Toggle planet info panel
    const toggleInfoBtn = document.getElementById('toggleInfo');
    const planetInfo = document.getElementById('planetInfo');
    toggleInfoBtn.addEventListener('click', () => {
      planetInfo.classList.toggle('show');
    });

    // Scale the saturn system for better marker fit
    const saturnRoot = document.getElementById('saturnRoot');
    saturnRoot.setAttribute('scale','0.8 0.8 0.8');

    // Improve visibility when marker is lost/found
    const marker = document.querySelector('a-marker');
    marker.addEventListener('markerFound', () => {
      document.getElementById('ui').style.display = 'none';
      planetInfo.classList.remove('show');
      
      // Show label when marker found
      const label = document.querySelector('.label');
      label.setAttribute('visible', 'true');
    });
    
    marker.addEventListener('markerLost', () => {
      document.getElementById('ui').style.display = 'block';
      
      // Hide label when marker lost
      const label = document.querySelector('.label');
      label.setAttribute('visible', 'false');
    });

    // Add click events to planet and moons for showing info
    document.addEventListener('DOMContentLoaded', () => {
      const planets = document.querySelectorAll('.planet, .moon');
      const planetName = document.getElementById('planetName');
      const planetDesc = document.getElementById('planetDesc');
      const planetFacts = document.getElementById('planetFacts');
      
      planets.forEach(planet => {
        planet.addEventListener('click', () => {
          planetName.textContent = planet.getAttribute('data-name');
          planetDesc.textContent = planet.getAttribute('data-desc');
          planetFacts.innerHTML = planet.getAttribute('data-facts');
          planetInfo.classList.add('show');
        });
      });
    });

    // Hide loading screen when scene is loaded
    document.querySelector('a-scene').addEventListener('loaded', () => {
      setTimeout(() => {
        document.getElementById('loading').classList.add('hide');
      }, 1500);
    });

    // Add keyboard controls for rotation (optional)
    document.addEventListener('keydown', (e) => {
      const saturnRoot = document.getElementById('saturnRoot');
      let rotation = saturnRoot.getAttribute('rotation');
      
      switch(e.key) {
        case 'ArrowLeft':
          rotation.y += 10;
          break;
        case 'ArrowRight':
          rotation.y -= 10;
          break;
        case 'ArrowUp':
          rotation.x += 10;
          break;
        case 'ArrowDown':
          rotation.x -= 10;
          break;
      }
      
      saturnRoot.setAttribute('rotation', rotation);
    });

    // Add touch controls for mobile
    let touchStartX = 0;
    let touchStartY = 0;
    
    document.addEventListener('touchstart', (e) => {
      touchStartX = e.touches[0].clientX;
      touchStartY = e.touches[0].clientY;
    });
    
    document.addEventListener('touchmove', (e) => {
      if (!touchStartX || !touchStartY) return;
      
      const touchEndX = e.touches[0].clientX;
      const touchEndY = e.touches[0].clientY;
      
      const diffX = touchEndX - touchStartX;
      const diffY = touchEndY - touchStartY;
      
      const saturnRoot = document.getElementById('saturnRoot');
      let rotation = saturnRoot.getAttribute('rotation');
      
      rotation.y += diffX * 0.5;
      rotation.x += diffY * 0.5;
      
      saturnRoot.setAttribute('rotation', rotation);
      
      touchStartX = touchEndX;
      touchStartY = touchEndY;
    });

    // Auto-rotate saturn slowly
    setInterval(() => {
      const saturn = document.getElementById('saturn');
      let rotation = saturn.getAttribute('rotation');
      rotation.y += 0.08;
      saturn.setAttribute('rotation', rotation);
    }, 50);

    // Animasi partikel debu untuk efek yang lebih hidup
    setInterval(() => {
      const dustParticles = document.getElementById('dustParticles');
      let rotation = dustParticles.getAttribute('rotation') || {x: 0, y: 0, z: 0};
      rotation.y += 0.5;
      dustParticles.setAttribute('rotation', rotation);
    }, 50);
  </script>
</body>
</html>
