<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <title>Web AR Tata Surya â€” Hiro Marker</title>
  <!-- A-Frame -->
  <script src="https://aframe.io/releases/1.4.1/aframe.min.js"></script>
  <!-- AR.js for A-Frame (marker-based) -->
  <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar.js"></script>
  <style>
    html,body{height:100%;margin:0;overflow:hidden;font-family:system-ui,Segoe UI,Roboto}
    
    /* UI Mobile-friendly */
    #ui{
      position:fixed;
      left:0;
      top:0;
      right:0;
      z-index:10;
      background:rgba(0,0,0,0.75);
      color:#fff;
      padding:12px;
      border-radius:0 0 12px 12px;
      backdrop-filter: blur(5px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }
    
    #ui h1{
      font-size:18px;
      margin:0 0 8px;
      text-align:center;
    }
    
    #ui p{
      margin:6px 0;
      font-size:14px;
      line-height:1.4;
      text-align:center;
    }
    
    #ui button{
      display:block;
      width:100%;
      margin-top:8px;
      padding:10px;
      border-radius:8px;
      border:0;
      background:#1976d2;
      color:#fff;
      font-weight:bold;
      font-size:14px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }
    
    #ui button:active{
      background:#1565c0;
      transform: translateY(1px);
    }
    
    /* Planet info panel */
    #planetInfo{
      position:fixed;
      bottom:0;
      left:0;
      right:0;
      background:rgba(0,0,0,0.85);
      color:#fff;
      padding:12px;
      border-radius:12px 12px 0 0;
      backdrop-filter: blur(5px);
      transform: translateY(100%);
      transition: transform 0.3s ease;
      z-index:9;
    }
    
    #planetInfo.show{
      transform: translateY(0);
    }
    
    #planetInfo h2{
      margin:0 0 8px;
      font-size:16px;
      text-align:center;
    }
    
    #planetInfo p{
      margin:4px 0;
      font-size:13px;
      line-height:1.4;
    }
    
    /* Loading indicator */
    #loading{
      position:fixed;
      top:0;
      left:0;
      width:100%;
      height:100%;
      background:#000;
      color:#fff;
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      z-index:100;
    }
    
    #loading.hide{
      display:none;
    }
    
    .spinner{
      width:40px;
      height:40px;
      border:4px solid rgba(255,255,255,0.3);
      border-radius:50%;
      border-top-color:#1976d2;
      animation:spin 1s linear infinite;
      margin-bottom:15px;
    }
    
    @keyframes spin{
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* Responsive adjustments */
    @media (min-width: 768px) {
      #ui{
        left:12px;
        top:12px;
        right:auto;
        width:280px;
        border-radius:8px;
      }
      
      #planetInfo{
        left:12px;
        bottom:12px;
        right:auto;
        width:280px;
        border-radius:8px;
      }
    }
  </style>
</head>
<body>
  <!-- Loading screen -->
  <div id="loading">
    <div class="spinner"></div>
    <p>Memuat Tata Surya AR...</p>
  </div>

  <!-- UI Panel -->
  <div id="ui">
    <h1>ðŸŒŒ Tata Surya AR</h1>
    <p>Arahkan kamera ke <strong>Hiro marker</strong> untuk melihat model tata surya.</p>
    <p>Tips: letakkan marker di meja, perlahan miringkan kamera untuk melihat orbit.</p>
    <button id="toggleOrbits">Tampilkan/Sembunyikan Orbit</button>
    <button id="toggleInfo">Info Planet</button>
  </div>

  <!-- Planet Info Panel -->
  <div id="planetInfo">
    <h2 id="planetName">Matahari</h2>
    <p id="planetDesc">Bintang di pusat tata surya kita</p>
    <p id="planetFacts">Diameter: 1,392,684 km<br>Suhu Inti: 15 juta Â°C</p>
  </div>

  <!-- A-Frame scene with AR.js enabled -->
  <a-scene vr-mode-ui="enabled: false" embedded arjs="sourceType: webcam; debugUIEnabled: false;">

    <!-- Ambient + directional light -->
    <a-entity light="type: ambient; intensity: 0.6"></a-entity>
    <a-entity light="type: directional; intensity: 0.8" position="1 2 1"></a-entity>

    <!-- Marker (Hiro) -->
    <a-marker preset="hiro">
      <!-- Root of the solar system attached to the marker -->
      <a-entity id="solarRoot" rotation="0 0 0">

        <!-- Sun with improved appearance -->
        <a-sphere id="sun" radius="0.6" position="0 0 0" 
                  material="shader: standard; emissive: #ffcc33; emissiveIntensity: 1; metalness: 0.2; roughness: 0.6"
                  animation="property: rotation; to: 0 360 0; loop: true; dur: 20000; easing: linear"
                  class="planet" data-name="Matahari" 
                  data-desc="Bintang di pusat tata surya kita"
                  data-facts="Diameter: 1,392,684 km<br>Suhu Inti: 15 juta Â°C">
          <a-sphere radius="0.65" position="0 0 0" material="shader: standard; emissive: #ff9900; emissiveIntensity: 0.3; opacity: 0.3; transparent: true"></a-sphere>
        </a-sphere>

        <!-- Mercury (small, close) -->
        <a-entity id="mercuryOrbit" position="0 0 0">
          <a-entity class="orbitRot" animation="property: rotation; to: 0 360 0; loop: true; dur: 4000; easing: linear"></a-entity>
          <a-sphere radius="0.06" position="1 0 0" material="color: #8b7d6b" 
                    class="planet" data-name="Merkurius" 
                    data-desc="Planet terkecil dan terdekat dengan Matahari"
                    data-facts="Diameter: 4,879 km<br>Periode Orbit: 88 hari"></a-sphere>
        </a-entity>

        <!-- Venus -->
        <a-entity id="venusOrbit" position="0 0 0">
          <a-entity class="orbitRot" animation="property: rotation; to: 0 360 0; loop: true; dur: 7000; easing: linear"></a-entity>
          <a-sphere radius="0.09" position="1.45 0 0" material="color: #cfa27a" 
                    class="planet" data-name="Venus" 
                    data-desc="Planet terpanas di tata surya"
                    data-facts="Diameter: 12,104 km<br>Suhu Permukaan: 462Â°C"></a-sphere>
        </a-entity>

        <!-- Earth + Moon -->
        <a-entity id="earthOrbit" position="0 0 0">
          <a-entity class="orbitRot" animation="property: rotation; to: 0 360 0; loop: true; dur: 10000; easing: linear"></a-entity>

          <a-sphere id="earth" radius="0.12" position="2 0 0" 
                    material="color: #2a66ff; metalness:0.1; roughness:0.8"
                    class="planet" data-name="Bumi" 
                    data-desc="Planet tempat tinggal kita"
                    data-facts="Diameter: 12,742 km<br>Satelit Alami: 1 (Bulan)">
            <!-- Clouds for Earth -->
            <a-sphere radius="0.125" position="0 0 0" material="shader: standard; color: #ffffff; opacity: 0.2; transparent: true"
                      animation="property: rotation; to: 0 360 0; loop: true; dur: 8000; easing: linear"></a-sphere>
          </a-sphere>

          <!-- Moon orbiting the Earth -->
          <a-entity id="moonOrbit" position="2 0 0">
            <a-entity animation="property: rotation; to: 0 360 0; loop: true; dur: 1500; easing: linear"></a-entity>
            <a-sphere radius="0.035" position="0.25 0 0" material="color: #d9d9d9"
                      class="planet" data-name="Bulan" 
                      data-desc="Satelit alami Bumi"
                      data-facts="Diameter: 3,474 km<br>Jarak dari Bumi: 384,400 km"></a-sphere>
          </a-entity>
        </a-entity>

        <!-- Mars -->
        <a-entity id="marsOrbit" position="0 0 0">
          <a-entity class="orbitRot" animation="property: rotation; to: 0 360 0; loop: true; dur: 16000; easing: linear"></a-entity>
          <a-sphere radius="0.085" position="2.6 0 0" material="color: #d14b2a" 
                    class="planet" data-name="Mars" 
                    data-desc="Planet Merah"
                    data-facts="Diameter: 6,779 km<br>Satelit Alami: 2 (Phobos & Deimos)"></a-sphere>
        </a-entity>

        <!-- Jupiter -->
        <a-entity id="jupiterOrbit" position="0 0 0">
          <a-entity class="orbitRot" animation="property: rotation; to: 0 360 0; loop: true; dur: 30000; easing: linear"></a-entity>
          <a-sphere radius="0.25" position="3.5 0 0" material="color: #d8ca9d" 
                    class="planet" data-name="Jupiter" 
                    data-desc="Planet terbesar di tata surya"
                    data-facts="Diameter: 139,820 km<br>Satelit Alami: 79+"></a-sphere>
        </a-entity>

        <!-- Saturn with rings -->
        <a-entity id="saturnOrbit" position="0 0 0">
          <a-entity class="orbitRot" animation="property: rotation; to: 0 360 0; loop: true; dur: 50000; easing: linear"></a-entity>
          <a-entity position="4.5 0 0" class="planet" data-name="Saturnus" 
                    data-desc="Planet dengan cincin yang indah"
                    data-facts="Diameter: 116,460 km<br>Cincin: Es dan batuan">
            <a-sphere radius="0.2" material="color: #e3d8b0"></a-sphere>
            <!-- Saturn's rings -->
            <a-torus radius="0.35" radius-tubular="0.02" rotation="30 0 0" material="color: #f0e6c3"></a-torus>
          </a-entity>
        </a-entity>

        <!-- Simple orbit rings (toggleable) -->
        <a-ring id="ringMercury" radius-inner="0.98" radius-outer="1.02" rotation="-90 0 0" visible="true" color="#8b7d6b"></a-ring>
        <a-ring id="ringVenus" radius-inner="1.43" radius-outer="1.47" rotation="-90 0 0" visible="true" color="#cfa27a"></a-ring>
        <a-ring id="ringEarth" radius-inner="1.98" radius-outer="2.02" rotation="-90 0 0" visible="true" color="#2a66ff"></a-ring>
        <a-ring id="ringMars" radius-inner="2.58" radius-outer="2.62" rotation="-90 0 0" visible="true" color="#d14b2a"></a-ring>
        <a-ring id="ringJupiter" radius-inner="3.48" radius-outer="3.52" rotation="-90 0 0" visible="true" color="#d8ca9d"></a-ring>
        <a-ring id="ringSaturn" radius-inner="4.48" radius-outer="4.52" rotation="-90 0 0" visible="true" color="#e3d8b0"></a-ring>

      </a-entity>
    </a-marker>

    <!-- Camera -->
    <a-entity camera></a-entity>
  </a-scene>

  <script>
    // Toggle orbit rings
    const btn = document.getElementById('toggleOrbits');
    btn.addEventListener('click', () => {
      const rings = ['ringMercury','ringVenus','ringEarth','ringMars','ringJupiter','ringSaturn'];
      rings.forEach(id => {
        const el = document.getElementById(id);
        el.setAttribute('visible', el.getAttribute('visible') === 'true' ? 'false' : 'true');
      });
    });

    // Toggle planet info panel
    const toggleInfoBtn = document.getElementById('toggleInfo');
    const planetInfo = document.getElementById('planetInfo');
    toggleInfoBtn.addEventListener('click', () => {
      planetInfo.classList.toggle('show');
    });

    // Scale the whole solar system for better marker fit on smaller markers
    const solarRoot = document.getElementById('solarRoot');
    // initial scale tuned for common hiro marker size
    solarRoot.setAttribute('scale','0.5 0.5 0.5');

    // Improve visibility when marker is lost/found
    const marker = document.querySelector('a-marker');
    marker.addEventListener('markerFound', () => {
      document.getElementById('ui').style.display = 'none';
      planetInfo.classList.remove('show');
    });
    marker.addEventListener('markerLost', () => {
      document.getElementById('ui').style.display = 'block';
    });

    // Add click events to planets for showing info
    document.addEventListener('DOMContentLoaded', () => {
      const planets = document.querySelectorAll('.planet');
      const planetName = document.getElementById('planetName');
      const planetDesc = document.getElementById('planetDesc');
      const planetFacts = document.getElementById('planetFacts');
      
      planets.forEach(planet => {
        planet.addEventListener('click', () => {
          planetName.textContent = planet.getAttribute('data-name');
          planetDesc.textContent = planet.getAttribute('data-desc');
          planetFacts.innerHTML = planet.getAttribute('data-facts');
          planetInfo.classList.add('show');
        });
      });
    });

    // Hide loading screen when scene is loaded
    document.querySelector('a-scene').addEventListener('loaded', () => {
      setTimeout(() => {
        document.getElementById('loading').classList.add('hide');
      }, 1500);
    });
  </script>
</body>
</html>
