<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <title>Web AR Tata Surya — Hiro Marker</title>
  <!-- A-Frame -->
  <script src="https://aframe.io/releases/1.4.1/aframe.min.js"></script>
  <!-- AR.js for A-Frame (marker-based) -->
  <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar.js"></script>
  <style>
    html,body{height:100%;margin:0;overflow:hidden;font-family:system-ui,Segoe UI,Roboto}
    #ui{position:fixed;left:12px;top:12px;z-index:10;background:rgba(0,0,0,0.45);color:#fff;padding:10px;border-radius:8px}
    #ui h1{font-size:16px;margin:0 0 6px}
    #ui p{margin:4px 0;font-size:13px}
    #ui button{margin-top:6px;padding:6px 8px;border-radius:6px;border:0;background:#1976d2;color:#fff}
  </style>
</head>
<body>
  <div id="ui">
    <h1>Web AR — Tata Surya (Hiro Marker)</h1>
    <p>Arahkan kamera ke <strong>Hiro marker</strong> (pola AR) untuk melihat model tata surya.</p>
    <p>Tips: letakkan marker di meja, perlahan miringkan kamera untuk melihat orbit.</p>
    <button id="toggleOrbits">Toggle Orbit Lines</button>
  </div>

  <!-- A-Frame scene with AR.js enabled -->
  <a-scene vr-mode-ui="enabled: false" embedded arjs="sourceType: webcam; debugUIEnabled: false;">

    <!-- Ambient + directional light -->
    <a-entity light="type: ambient; intensity: 0.6"></a-entity>
    <a-entity light="type: directional; intensity: 0.8" position="1 2 1"></a-entity>

    <!-- Marker (Hiro) -->
    <a-marker preset="hiro">
      <!-- Root of the solar system attached to the marker -->
      <a-entity id="solarRoot" rotation="0 0 0">

        <!-- Sun -->
        <a-sphere id="sun" radius="0.6" position="0 0 0" material="shader: standard; emissive: #ffcc33; emissiveIntensity: 1; metalness: 0.2; roughness: 0.6"></a-sphere>

        <!-- Mercury (small, close) -->
        <a-entity id="mercuryOrbit" position="0 0 0">
          <a-entity class="orbitRot" animation="property: rotation; to: 0 360 0; loop: true; dur: 4000; easing: linear"></a-entity>
          <a-sphere radius="0.06" position="1 0 0" material="color: #8b7d6b"></a-sphere>
        </a-entity>

        <!-- Venus -->
        <a-entity id="venusOrbit" position="0 0 0">
          <a-entity class="orbitRot" animation="property: rotation; to: 0 360 0; loop: true; dur: 7000; easing: linear"></a-entity>
          <a-sphere radius="0.09" position="1.45 0 0" material="color: #cfa27a"></a-sphere>
        </a-entity>

        <!-- Earth + Moon -->
        <a-entity id="earthOrbit" position="0 0 0">
          <a-entity class="orbitRot" animation="property: rotation; to: 0 360 0; loop: true; dur: 10000; easing: linear"></a-entity>

          <a-sphere id="earth" radius="0.12" position="2 0 0" material="color: #2a66ff; metalness:0.1; roughness:0.8"></a-sphere>

          <!-- Moon orbiting the Earth -->
          <a-entity id="moonOrbit" position="2 0 0">
            <a-entity animation="property: rotation; to: 0 360 0; loop: true; dur: 1500; easing: linear"></a-entity>
            <a-sphere radius="0.035" position="0.25 0 0" material="color: #d9d9d9"></a-sphere>
          </a-entity>
        </a-entity>

        <!-- Mars -->
        <a-entity id="marsOrbit" position="0 0 0">
          <a-entity class="orbitRot" animation="property: rotation; to: 0 360 0; loop: true; dur: 16000; easing: linear"></a-entity>
          <a-sphere radius="0.085" position="2.6 0 0" material="color: #d14b2a"></a-sphere>
        </a-entity>

        <!-- Simple orbit rings (toggleable) -->
        <a-ring id="ringMercury" radius-inner="0.98" radius-outer="1.02" rotation="-90 0 0" visible="true"></a-ring>
        <a-ring id="ringVenus" radius-inner="1.43" radius-outer="1.47" rotation="-90 0 0" visible="true"></a-ring>
        <a-ring id="ringEarth" radius-inner="1.98" radius-outer="2.02" rotation="-90 0 0" visible="true"></a-ring>
        <a-ring id="ringMars" radius-inner="2.58" radius-outer="2.62" rotation="-90 0 0" visible="true"></a-ring>

      </a-entity>
    </a-marker>

    <!-- Camera -->
    <a-entity camera></a-entity>
  </a-scene>

  <script>
    // Toggle orbit rings
    const btn = document.getElementById('toggleOrbits');
    btn.addEventListener('click', () => {
      const rings = ['ringMercury','ringVenus','ringEarth','ringMars'];
      rings.forEach(id => {
        const el = document.getElementById(id);
        el.setAttribute('visible', el.getAttribute('visible') === 'true' ? 'false' : 'true');
      });
    });

    // Scale the whole solar system for better marker fit on smaller markers
    const solarRoot = document.getElementById('solarRoot');
    // initial scale tuned for common hiro marker size
    solarRoot.setAttribute('scale','0.5 0.5 0.5');

    // Improve visibility when marker is lost/found
    const marker = document.querySelector('a-marker');
    marker.addEventListener('markerFound', () => {
      document.getElementById('ui').style.display = 'none';
    });
    marker.addEventListener('markerLost', () => {
      document.getElementById('ui').style.display = 'block';
    });
  </script>
</body>
</html>
