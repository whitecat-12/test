<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TETA SAINS - Sistem Peredaran Darah dan Sel Darah</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #38b2ac;
            --secondary: #0e7490;
            --accent: #f59e0b;
        }
        
        body {
            font-family: 'Baloo 2', cursive;
            background-color: #f8fafc;
        }
        
        .app-container {
            max-width: 414px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            position: relative;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        
        /* NAVBAR - TIDAK DIRUBAH */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            width: 100%;
            max-width: 414px;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
            background: white;
            z-index: 10;
            height: 70px;
            display: flex;
            align-items: center;
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #6b7280;
            text-decoration: none;
            flex: 1;
            height: 100%;
            padding: 0.5rem 0;
            transition: all 0.3s ease;
        }
        
        .nav-item span {
            font-size: 0.75rem;
            margin-top: 0.25rem;
        }
        
        .nav-item.active {
            color: var(--primary);
        }
        
        .nav-icon {
            transition: all 0.3s ease;
            font-size: 1.25rem;
        }
        
        .nav-icon.active {
            transform: translateY(-5px);
            color: var(--primary);
        }
        
        /* TABLE STYLES */
        .periodic-table {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 3px;
            padding: 5px;
            overflow-x: auto;
        }
        
        .element-cell {
            min-width: 42px;
            height: 42px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .element-cell:hover {
            transform: scale(1.05);
            z-index: 2;
            box-shadow: 0 3px 6px rgba(0,0,0,0.15);
        }
        
        .element-cell.selected {
            border: 2px solid #f59e0b;
            box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.2);
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(245, 158, 11, 0.4); }
            70% { box-shadow: 0 0 0 5px rgba(245, 158, 11, 0); }
            100% { box-shadow: 0 0 0 0 rgba(245, 158, 11, 0); }
        }
        
        .element-number {
            position: absolute;
            top: 3px;
            left: 4px;
            font-size: 8px;
            font-weight: bold;
            opacity: 0.7;
        }
        
        .element-symbol {
            font-size: 14px;
            font-weight: 800;
            line-height: 1;
        }
        
        .element-name {
            font-size: 6px;
            margin-top: 1px;
            text-align: center;
            display: none;
        }
        
        .element-cell:hover .element-name {
            display: block;
        }
        
        /* Legend styles */
        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
        }
        
        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 3px;
            margin-right: 8px;
            flex-shrink: 0;
        }
        
        /* SEL DARAH CATEGORY COLORS */
        .erythrocyte { background-color: #ff6b6b; color: white; }
        .leukocyte { background-color: #42a5f5; color: white; }
        .granulocyte { background-color: #7e57c2; color: white; }
        .agranulocyte { background-color: #66bb6a; color: white; }
        .lymphocyte { background-color: #ffa726; color: white; }
        .monocyte { background-color: #26c6da; color: white; }
        .thrombocyte { background-color: #ec407a; color: white; }
        .stem-cell { background-color: #ab47bc; color: white; }
        .plasma { background-color: #ffca28; color: #000; }
        .hemoglobin { background-color: #5c6bc0; color: white; }
        
        /* Modal styles */
        .element-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0,0,0,0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100;
            padding: 20px;
        }
        
        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 20px;
            max-width: 350px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }
        
        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
        }
        
        .app-logo {
            display: flex;
            align-items: center;
        }
        
        .app-logo-icon {
            background: #9999ff;
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 8px;
        }
        
        .app-name {
            font-weight: 700;
            font-size: 1.25rem;
            color: #9999ff;
        }
        
        /* Element detail styles */
        .element-detail-card {
            border-radius: 12px;
            padding: 15px;
            margin-top: 10px;
        }
        
        .detail-row {
            display: flex;
            justify-content: space-between;
            padding: 6px 0;
            border-bottom: 1px solid #eee;
        }
        
        .detail-label {
            font-weight: 600;
            color: #666;
            font-size: 14px;
        }
        
        .detail-value {
            font-weight: 700;
            color: #333;
            font-size: 14px;
        }
        
        /* Scrollbar styling */
        .periodic-table::-webkit-scrollbar {
            height: 6px;
        }
        
        .periodic-table::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }
        
        .periodic-table::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 3px;
        }
        
        /* Group labels */
        .group-label {
            font-size: 10px;
            text-align: center;
            color: #666;
            margin-bottom: 5px;
            font-weight: 600;
        }
        
        /* Period labels */
        .period-label {
            font-size: 10px;
            text-align: right;
            color: #666;
            font-weight: 600;
            padding-right: 5px;
            width: 20px;
        }
        
        /* Layout grid untuk tabel dengan label */
        .table-container {
            display: flex;
            flex-direction: column;
        }
        
        .table-header {
            display: grid;
            grid-template-columns: 20px repeat(8, 1fr);
            gap: 2px;
            margin-bottom: 5px;
        }
        
        .table-body {
            display: flex;
        }
        
        .period-labels {
            display: flex;
            flex-direction: column;
            gap: 2px;
            margin-right: 5px;
        }
        
        .period-row {
            height: 42px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* Combine System Styles */
        .combine-panel {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 15px;
        }
        
        .selected-elements {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 15px;
            min-height: 40px;
        }
        
        .selected-element-badge {
            background: white;
            color: #333;
            padding: 5px 10px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            font-size: 14px;
            font-weight: 600;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .selected-element-badge .remove-btn {
            background: none;
            border: none;
            color: #ff6b6b;
            margin-left: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        
        .combine-result {
            background: white;
            color: #333;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            display: none;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .compound-name {
            font-size: 18px;
            font-weight: 700;
            color: #333;
            margin-bottom: 5px;
        }
        
        .compound-formula {
            font-size: 24px;
            font-weight: 800;
            color: #4f46e5;
            margin-bottom: 10px;
        }
        
        .compound-description {
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
        }
        
        .compound-properties {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            font-size: 12px;
        }
        
        .compound-prop {
            background: #f8fafc;
            padding: 8px;
            border-radius: 6px;
        }
        
        .combine-actions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .combine-btn {
            flex: 1;
            background: #f59e0b;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .combine-btn:hover {
            background: #d97706;
        }
        
        .combine-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        .clear-btn {
            background: #ef4444;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .clear-btn:hover {
            background: #dc2626;
        }
        
        .status-message {
            text-align: center;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
            margin-top: 5px;
            min-height: 16px;
        }
        
        /* Tab Styles */
        .tab-container {
            display: flex;
            background: #f1f5f9;
            border-radius: 10px;
            padding: 5px;
            margin-bottom: 15px;
        }
        
        .tab {
            flex: 1;
            text-align: center;
            padding: 8px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }
        
        .tab.active {
            background: white;
            color: #4f46e5;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        /* Style untuk mobile consistency */
        @media (max-width: 414px) {
            .bottom-nav {
                height: 65px;
            }
            
            .nav-icon {
                font-size: 1.1rem;
            }
        }v
    </style>
</head>
<body>
    <!-- Mobile App Container -->
    <div class="app-container">
        <!-- App Header -->
        <header class="bg-gradient-to-r from-primary to-secondary p-4 text-white">
            <div class="flex justify-between items-center">
                <div class="app-logo">
                    <div class="app-logo-icon">
                        <i class="fas fa-heartbeat"></i>
                    </div>
                    <h1 class="app-name">HEMA CARE</h1>
                </div>
                <div class="flex items-center space-x-3">
                    <i class="fas fa-search"></i>
                    <i class="fas fa-user-circle text-xl"></i>
                </div>
            </div>
        </header>
        
        <!-- Main Content -->
        <main class="pb-24 p-4">
            <!-- Page Title -->
            <div class="mb-4">
                <h1 class="text-xl font-bold text-gray-800 mb-1">
                    <i class="fas fa-tint text-red-500 mr-2"></i> Sistem Peredaran Darah
                </h1>
                <p class="text-gray-600 text-sm">
                    Jenis sel darah dan komponen sistem peredaran darah
                </p>
            </div>
            
            <!-- Tabs -->
            <div class="tab-container">
                <div class="tab active" data-tab="table">Jenis Sel Darah</div>
                <div class="tab" data-tab="combine">Interaksi Sel</div>
            </div>
            
            <!-- Tab Content: Table -->
            <div id="table-tab" class="tab-content active">
                <!-- Search Bar -->
                <div class="mb-4">
                    <div class="relative">
                        <input type="text" id="search-element" placeholder="Cari jenis sel..." 
                               class="w-full p-3 pl-10 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-teal-500 text-sm">
                        <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                    </div>
                </div>
                
                <!-- Tabel Sel Darah -->
                <div class="mb-6">
                    <div class="flex justify-between items-center mb-3">
                        <h3 class="font-bold text-gray-700 text-sm flex items-center">
                            <i class="fas fa-microscope text-blue-500 mr-2 text-xs"></i> Komponen Darah
                        </h3>
                        <div class="text-xs text-gray-500">
                            <span id="total-elements">12</span> komponen
                        </div>
                    </div>
                    
                    <div class="bg-white border border-gray-200 rounded-xl p-3">
                        <div class="table-container">
                            <div class="table-body">
                                <!-- Tabel sel darah utama -->
                                <div id="periodic-table" class="periodic-table">
                                    <!-- Elements will be generated by JavaScript -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- Note untuk komponen khusus -->
                        <div class="mt-4 text-center">
                            <div class="text-xs text-gray-500 mb-2">
                                * Klik pada sel untuk melihat detail lengkap
                            </div>
                            <div class="flex justify-center space-x-4">
                                <button id="show-immune" class="text-xs bg-purple-100 text-purple-700 px-3 py-1 rounded-full">
                                    Sistem Imun
                                </button>
                                <button id="show-plasma" class="text-xs bg-blue-100 text-blue-700 px-3 py-1 rounded-full">
                                    Komponen Plasma
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Legend - Dipindah ke bawah tabel -->
                <div class="mb-6 p-3 bg-gray-50 rounded-xl">
                    <h3 class="font-bold text-gray-700 mb-2 text-sm">Kategori Warna:</h3>
                    <div class="grid grid-cols-2 gap-1">
                        <div class="legend-item">
                            <div class="legend-color erythrocyte"></div>
                            <span class="text-xs">Eritrosit</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color leukocyte"></div>
                            <span class="text-xs">Leukosit</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color granulocyte"></div>
                            <span class="text-xs">Granulosit</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color agranulocyte"></div>
                            <span class="text-xs">Agranulosit</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color thrombocyte"></div>
                            <span class="text-xs">Trombosit</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color plasma"></div>
                            <span class="text-xs">Plasma Darah</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color hemoglobin"></div>
                            <span class="text-xs">Hemoglobin</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color stem-cell"></div>
                            <span class="text-xs">Sel Punca</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Tab Content: Combine Elements -->
            <div id="combine-tab" class="tab-content">
                <div class="combine-panel">
                    <h3 class="font-bold text-lg mb-3">
                        <i class="fas fa-heartbeat mr-2"></i>Interaksi Sel Darah
                    </h3>
                    <p class="text-sm mb-4">
                        Pilih 2-3 komponen darah untuk melihat interaksi dan fungsi bersama.
                        Klik pada komponen di tabel untuk memilih.
                    </p>
                    
                    <div class="selected-elements" id="selected-elements">
                        <div class="text-sm text-center w-full py-2" id="empty-selection">
                            Belum ada komponen dipilih
                        </div>
                    </div>
                    
                    <div class="combine-actions">
                        <button id="combine-btn" class="combine-btn" disabled>
                            <i class="fas fa-bolt mr-2"></i>Lihat Interaksi
                        </button>
                        <button id="clear-btn" class="clear-btn">
                            <i class="fas fa-trash mr-2"></i>Hapus
                        </button>
                    </div>
                    
                    <div class="status-message" id="status-message">
                        Pilih 2 atau 3 komponen untuk melihat interaksi
                    </div>
                </div>
                
                <div id="combine-result" class="combine-result">
                    <!-- Results will be displayed here -->
                </div>
                
                <div class="bg-white border border-gray-200 rounded-xl p-3 mt-4">
                    <h3 class="font-bold text-gray-700 mb-3 text-sm flex items-center">
                        <i class="fas fa-microscope text-blue-500 mr-2 text-xs"></i> Komponen yang Tersedia
                    </h3>
                    <div class="table-container">
                        <div id="combine-periodic-table" class="periodic-table">
                            <!-- Elements for combine mode will be generated -->
                        </div>
                    </div>
                    <p class="text-xs text-gray-500 mt-3 text-center">
                        Klik pada komponen untuk memilih/dipilih ulang
                    </p>
                </div>
            </div>
            
            <!-- Quick Facts -->
            <div class="mb-6 p-3 bg-teal-50 rounded-xl">
                <h3 class="font-bold text-gray-700 mb-2 text-sm flex items-center">
                    <i class="fas fa-lightbulb text-teal-500 mr-2 text-xs"></i> Fakta Menarik Darah
                </h3>
                <div class="text-xs text-gray-700 space-y-1">
                    <p>• Darah manusia mengandung sekitar 5 liter pada orang dewasa</p>
                    <p>• Eritrosit hidup sekitar 120 hari sebelum digantikan</p>
                    <p>• Jantung memompa darah sejauh 19.000 km per hari</p>
                    <p>• Darah membawa oksigen, nutrisi, hormon, dan zat sisa</p>
                </div>
            </div>
        </main>
        
        <!-- Element Detail Modal -->
        <div id="element-modal" class="element-modal hidden">
            <div class="modal-content">
                <button id="close-modal" class="close-modal">&times;</button>
                <div id="modal-body"></div>
            </div>
        </div>
        
        <!-- Modal untuk Sistem Imun/Plasma -->
        <div id="special-modal" class="element-modal hidden">
            <div class="modal-content">
                <button id="close-special-modal" class="close-modal">&times;</button>
                <div id="special-modal-body"></div>
            </div>
        </div>
        
        <!-- Bottom Navigation -->
    <nav class="bottom-nav">
      <a href="../dashboard siswa.html" class="nav-item">
        <i class="fas fa-home nav-icon"></i>
        <span>Beranda</span>
      </a>
      <a href="../soal harian/dashboard soal.html" class="nav-item">
        <i class="fas fa-flask nav-icon"></i>
        <span>Soal Harian</span>
      </a>
      <a href="../ai/nayra.html" class="nav-item">
        <i class="fas fa-robot nav-icon"></i>
        <span>Nayra AI</span>
      </a>
      <a href="../materi harian/kategori materi.html" class="nav-item">
        <i class="fas fa-chalkboard-teacher nav-icon"></i>
        <span>Materi Harian</span>
      </a>
      <a href="../profil/profil.html" class="nav-item">
        <i class="fas fa-user nav-icon"></i>
        <span>Profil</span>
      </a>
          </nav>
    </div>

    <script>
        // Data Sel Darah dan Komponen Sistem Peredaran
        const bloodComponents = [
            // Eritrosit (Sel Darah Merah)
            { symbol: "RBC", name: "Eritrosit", number: 1, count: "4.5-5.5 juta/µL", category: "erythrocyte", colorClass: "erythrocyte", lifespan: "120 hari", function: "Mengangkut O₂ dan CO₂", size: "7-8 µm" },
            
            // Leukosit (Sel Darah Putih) - Granulosit
            { symbol: "NEUT", name: "Neutrofil", number: 2, count: "40-75%", category: "granulocyte", colorClass: "granulocyte", lifespan: "6 jam-5 hari", function: "Fagositosis bakteri", size: "10-12 µm" },
            { symbol: "EOSI", name: "Eosinofil", number: 3, count: "1-6%", category: "granulocyte", colorClass: "granulocyte", lifespan: "8-12 hari", function: "Melawan parasit", size: "10-12 µm" },
            { symbol: "BASO", name: "Basofil", number: 4, count: "0-1%", category: "granulocyte", colorClass: "granulocyte", lifespan: "beberapa jam-hari", function: "Respons alergi", size: "10-12 µm" },
            
            // Leukosit - Agranulosit
            { symbol: "LYMP", name: "Limfosit", number: 5, count: "20-45%", category: "lymphocyte", colorClass: "lymphocyte", lifespan: "berbulan-tahun", function: "Imunitas spesifik", size: "6-9 µm" },
            { symbol: "MONO", name: "Monosit", number: 6, count: "2-10%", category: "monocyte", colorClass: "monocyte", lifespan: "beberapa bulan", function: "Fagositosis besar", size: "12-20 µm" },
            
            // Trombosit
            { symbol: "PLT", name: "Trombosit", number: 7, count: "150-450 ribu/µL", category: "thrombocyte", colorClass: "thrombocyte", lifespan: "8-10 hari", function: "Pembekuan darah", size: "2-3 µm" },
            
            // Plasma dan Komponennya
            { symbol: "PLAS", name: "Plasma", number: 8, count: "55% volume darah", category: "plasma", colorClass: "plasma", lifespan: "-", function: "Medium transportasi", composition: "Air 92%, protein 7%" },
            { symbol: "ALB", name: "Albumin", number: 9, count: "3.5-5.0 g/dL", category: "plasma", colorClass: "plasma", lifespan: "15-19 hari", function: "Tekanan osmotik", size: "protein" },
            { symbol: "GLOB", name: "Globulin", number: 10, count: "2.0-3.5 g/dL", category: "plasma", colorClass: "plasma", lifespan: "bervariasi", function: "Imunitas, transport", size: "protein" },
            
            // Hemoglobin
            { symbol: "HGB", name: "Hemoglobin", number: 11, count: "13-18 g/dL", category: "hemoglobin", colorClass: "hemoglobin", lifespan: "120 hari", function: "Pengikat O₂", structure: "4 subunit" },
            
            // Sel Punca
            { symbol: "HSC", name: "Sel Punca Hematopoietik", number: 12, count: "sangat sedikit", category: "stem-cell", colorClass: "stem-cell", lifespan: "seumur hidup", function: "Produksi semua sel darah", location: "Sumsum tulang" }
        ];

        // Data Interaksi Sel Darah
        const bloodInteractions = [
            // Interaksi eritrosit dengan lainnya
            { components: ["RBC", "HGB"], name: "Transport Oksigen", type: "fungsional",
              description: "Eritrosit mengandung hemoglobin yang mengikat dan melepaskan oksigen.",
              details: ["Setiap hemoglobin mengikat 4 molekul O₂", "Oksihemoglobin berwarna merah terang", "Deoksihemoglobin berwarna merah gelap"] },
            
            // Pembekuan darah
            { components: ["PLT", "PLAS"], name: "Proses Pembekuan", type: "hemostasis",
              description: "Trombosit dan faktor pembekuan dalam plasma bekerja sama membentuk bekuan.",
              details: ["Trombosit membentuk sumbat trombosit", "Faktor pembekuan mengaktifkan kaskade", "Fibrin membentuk jaring penangkap sel"] },
            
            // Sistem imun
            { components: ["NEUT", "LYMP"], name: "Respons Imun Bawaan & Adaptif", type: "imunitas",
              description: "Neutrofil (imunitas bawaan) dan limfosit (imunitas adaptif) melindungi tubuh.",
              details: ["Neutrofil: respons cepat terhadap infeksi", "Limfosit: respons spesifik memori", "Kerja sama menghasilkan imunitas optimal"] },
            
            // Fagositosis
            { components: ["MONO", "NEUT"], name: "Sistem Fagositik", type: "pembersihan",
              description: "Monosit (makrofag) dan neutrofil membersihkan debris dan patogen.",
              details: ["Monosit: fagositosis besar, jangka panjang", "Neutrofil: fagositosis cepat", "Bekerja di jaringan berbeda"] },
            
            // Transport nutrisi
            { components: ["PLAS", "ALB"], name: "Transport Nutrisi & Hormon", type: "transport",
              description: "Plasma dan albumin mengangkut nutrisi, hormon, dan obat-obatan.",
              details: ["Albumin mengikat asam lemak bebas", "Mengangkut hormon tiroid", "Membawa obat-obatan ke target"] },
            
            // Produksi sel darah
            { components: ["HSC", "RBC", "PLT"], name: "Hematopoiesis", type: "produksi",
              description: "Sel punca hematopoietik memproduksi eritrosit dan trombosit secara terus menerus.",
              details: ["Di sumsum tulang merah", "Diatur oleh eritropoietin dan trombopoietin", "Produksi 2 juta eritrosit/detik"] },
            
            // Alergi dan inflamasi
            { components: ["BASO", "EOSI"], name: "Respons Alergi & Inflamasi", type: "alergi",
              description: "Basofil dan eosinofil terlibat dalam respons alergi dan melawan parasit.",
              details: ["Basofil melepaskan histamin", "Eosinofil melawan parasit besar", "Terlibat dalam asma dan alergi"] },
            
            // Imunoglobulin
            { components: ["LYMP", "GLOB"], name: "Produksi Antibodi", type: "imunitas humoral",
              description: "Limfosit B menghasilkan imunoglobulin (antibodi) yang bersirkulasi sebagai globulin.",
              details: ["Limfosit B: produksi antibodi", "Globulin: kelas imunoglobulin", "IgG, IgA, IgM, IgE, IgD"] },
            
            // Oksigenasi jaringan
            { components: ["RBC", "HGB", "PLAS"], name: "Oksigenasi Jaringan", type: "respirasi",
              description: "Eritrosit dengan hemoglobin dalam plasma mengangkut oksigen ke seluruh tubuh.",
              details: ["Pertukaran gas di kapiler", "CO₂ diangkut sebagai bikarbonat", "pH darah dipertahankan 7.35-7.45"] },
            
            // Komplemen sistem
            { components: ["PLAS", "NEUT"], name: "Sistem Komplemen", type: "imunitas bawaan",
              description: "Protein komplemen dalam plasma bekerja dengan neutrofil melisiskan bakteri.",
              details: ["Kaskade aktivasi komplemen", "Membentuk kompleks serangan membran", "Meningkatkan fagositosis"] }
        ];

        // DOM Elements
        const periodicTableContainer = document.getElementById('periodic-table');
        const combinePeriodicTableContainer = document.getElementById('combine-periodic-table');
        const elementModal = document.getElementById('element-modal');
        const specialModal = document.getElementById('special-modal');
        const closeModalBtn = document.getElementById('close-modal');
        const closeSpecialModalBtn = document.getElementById('close-special-modal');
        const modalBody = document.getElementById('modal-body');
        const specialModalBody = document.getElementById('special-modal-body');
        const searchInput = document.getElementById('search-element');
        const totalElementsSpan = document.getElementById('total-elements');
        const showImmuneBtn = document.getElementById('show-immune');
        const showPlasmaBtn = document.getElementById('show-plasma');
        const selectedElementsContainer = document.getElementById('selected-elements');
        const emptySelectionMsg = document.getElementById('empty-selection');
        const combineBtn = document.getElementById('combine-btn');
        const clearBtn = document.getElementById('clear-btn');
        const combineResult = document.getElementById('combine-result');
        const statusMessage = document.getElementById('status-message');
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');

        // State untuk sistem interaksi
        let selectedComponents = [];
        let currentTab = 'table';

        // Inisialisasi Tabel Sel Darah
        function initBloodComponentsTable() {
            // Kosongkan kontainer
            periodicTableContainer.innerHTML = '';
            
            // Tampilkan semua komponen darah dalam grid 8 kolom
            bloodComponents.forEach(component => {
                const cellDiv = document.createElement('div');
                cellDiv.className = `element-cell ${component.colorClass}`;
                cellDiv.dataset.symbol = component.symbol;
                cellDiv.dataset.number = component.number;
                
                cellDiv.innerHTML = `
                    <div class="element-number">${component.number}</div>
                    <div class="element-symbol">${component.symbol}</div>
                    <div class="element-name">${component.name}</div>
                `;
                
                cellDiv.addEventListener('click', () => showComponentDetails(component));
                periodicTableContainer.appendChild(cellDiv);
            });
            
            // Inisialisasi tabel untuk mode interaksi
            initCombineTable();
            
            // Update total komponen
            totalElementsSpan.textContent = bloodComponents.length;
            
            // Setup event listeners
            setupEventListeners();
        }

        // Inisialisasi tabel untuk mode interaksi
        function initCombineTable() {
            combinePeriodicTableContainer.innerHTML = '';
            
            // Tampilkan semua komponen dalam grid yang sama
            bloodComponents.forEach(component => {
                const cellDiv = document.createElement('div');
                cellDiv.className = `element-cell ${component.colorClass}`;
                cellDiv.dataset.symbol = component.symbol;
                cellDiv.dataset.number = component.number;
                
                cellDiv.innerHTML = `
                    <div class="element-number">${component.number}</div>
                    <div class="element-symbol">${component.symbol}</div>
                `;
                
                cellDiv.addEventListener('click', () => selectComponentForInteraction(component));
                combinePeriodicTableContainer.appendChild(cellDiv);
            });
            
            // Set grid template
            combinePeriodicTableContainer.style.gridTemplateColumns = 'repeat(6, 1fr)';
        }

        // Pilih komponen untuk interaksi
        function selectComponentForInteraction(component) {
            // Cek apakah komponen sudah dipilih
            const existingIndex = selectedComponents.findIndex(c => c.symbol === component.symbol);
            
            if (existingIndex !== -1) {
                // Hapus komponen jika sudah dipilih
                selectedComponents.splice(existingIndex, 1);
            } else {
                // Tambahkan komponen jika belum dipilih (maksimal 3)
                if (selectedComponents.length < 3) {
                    selectedComponents.push(component);
                } else {
                    showStatusMessage("Maksimal 3 komponen yang dapat dilihat interaksinya", "error");
                    return;
                }
            }
            
            // Perbarui tampilan komponen yang dipilih
            updateSelectedComponentsDisplay();
            
            // Perbarui status tombol
            updateCombineButton();
            
            // Perbarui status message
            updateStatusMessage();
            
            // Highlight komponen di tabel
            highlightSelectedComponents();
        }

        // Perbarui tampilan komponen yang dipilih
        function updateSelectedComponentsDisplay() {
            selectedElementsContainer.innerHTML = '';
            
            if (selectedComponents.length === 0) {
                emptySelectionMsg.style.display = 'block';
                return;
            }
            
            emptySelectionMsg.style.display = 'none';
            
            selectedComponents.forEach((component, index) => {
                const badge = document.createElement('div');
                badge.className = 'selected-element-badge';
                badge.innerHTML = `
                    ${component.symbol} - ${component.name}
                    <button class="remove-btn" data-index="${index}">&times;</button>
                `;
                
                badge.querySelector('.remove-btn').addEventListener('click', (e) => {
                    e.stopPropagation();
                    selectedComponents.splice(index, 1);
                    updateSelectedComponentsDisplay();
                    updateCombineButton();
                    updateStatusMessage();
                    highlightSelectedComponents();
                });
                
                selectedElementsContainer.appendChild(badge);
            });
        }

        // Highlight komponen yang dipilih di tabel
        function highlightSelectedComponents() {
            // Reset semua komponen di tabel interaksi
            document.querySelectorAll('#combine-periodic-table .element-cell').forEach(cell => {
                cell.classList.remove('selected');
            });
            
            // Highlight komponen yang dipilih
            selectedComponents.forEach(component => {
                const cells = document.querySelectorAll(`#combine-periodic-table [data-symbol="${component.symbol}"]`);
                cells.forEach(cell => {
                    cell.classList.add('selected');
                });
            });
        }

        // Perbarui status tombol
        function updateCombineButton() {
            if (selectedComponents.length >= 2) {
                combineBtn.disabled = false;
                combineBtn.innerHTML = `<i class="fas fa-bolt mr-2"></i>Lihat Interaksi (${selectedComponents.length})`;
            } else {
                combineBtn.disabled = true;
                combineBtn.innerHTML = `<i class="fas fa-bolt mr-2"></i>Lihat Interaksi`;
            }
        }

        // Perbarui status message
        function updateStatusMessage() {
            if (selectedComponents.length === 0) {
                statusMessage.textContent = "Pilih 2 atau 3 komponen untuk melihat interaksi";
            } else if (selectedComponents.length === 1) {
                statusMessage.textContent = "Pilih 1 komponen lagi untuk melihat interaksi";
            } else if (selectedComponents.length === 2) {
                statusMessage.textContent = "Klik 'Lihat Interaksi' untuk melihat hubungan 2 komponen";
            } else if (selectedComponents.length === 3) {
                statusMessage.textContent = "Klik 'Lihat Interaksi' untuk melihat hubungan 3 komponen";
            }
        }

        // Tampilkan pesan status sementara
        function showStatusMessage(message, type = "info") {
            const originalMessage = statusMessage.textContent;
            statusMessage.textContent = message;
            statusMessage.style.color = type === "error" ? "#fecaca" : "rgba(255, 255, 255, 0.8)";
            
            setTimeout(() => {
                statusMessage.textContent = originalMessage;
                statusMessage.style.color = "rgba(255, 255, 255, 0.8)";
            }, 3000);
        }

        // Tampilkan interaksi komponen yang dipilih
        function showComponentInteraction() {
            if (selectedComponents.length < 2) return;
            
            // Urutkan komponen berdasarkan nomor
            const sortedComponents = [...selectedComponents].sort((a, b) => a.number - b.number);
            const componentSymbols = sortedComponents.map(c => c.symbol);
            
            // Cari interaksi yang diketahui
            let foundInteraction = null;
            
            for (const interaction of bloodInteractions) {
                const interactionComponents = [...interaction.components].sort();
                const selectedComponentSymbols = [...componentSymbols].sort();
                
                if (JSON.stringify(interactionComponents) === JSON.stringify(selectedComponentSymbols)) {
                    foundInteraction = interaction;
                    break;
                }
            }
            
            // Jika tidak ditemukan, buat interaksi generik
            if (!foundInteraction) {
                foundInteraction = generateGenericInteraction(sortedComponents);
            }
            
            // Tampilkan hasil
            displayInteractionResult(foundInteraction, sortedComponents);
        }

        // Hasilkan interaksi generik berdasarkan komponen
        function generateGenericInteraction(components) {
            const componentCount = components.length;
            let name = "Interaksi Komponen Darah";
            let type = "fungsional";
            let description = "";
            let details = [];
            
            if (componentCount === 2) {
                const [c1, c2] = components;
                name = `Hubungan ${c1.name} dan ${c2.name}`;
                description = `${c1.name} (${c1.symbol}) dan ${c2.name} (${c2.symbol}) bekerja sama dalam sistem peredaran darah.`;
                details = [
                    `Fungsi ${c1.name}: ${c1.function}`,
                    `Fungsi ${c2.name}: ${c2.function}`,
                    `Lokasi utama: Darah dan jaringan`,
                    `Rasio normal: ${c1.count} dan ${c2.count}`
                ];
            } else if (componentCount === 3) {
                const [c1, c2, c3] = components;
                name = `Sistem ${c1.name}-${c2.name}-${c3.name}`;
                description = `${c1.name}, ${c2.name}, dan ${c3.name} membentuk sistem terintegrasi dalam homeostasis tubuh.`;
                details = [
                    `Peran ${c1.symbol}: ${c1.function}`,
                    `Peran ${c2.symbol}: ${c2.function}`,
                    `Peran ${c3.symbol}: ${c3.function}`,
                    `Koordinasi: Diatur oleh hormon dan sinyal kimia`
                ];
            }
            
            return {
                components: components.map(c => c.symbol),
                name,
                type,
                description,
                details
            };
        }

        // Tampilkan hasil interaksi
        function displayInteractionResult(interaction, components) {
            combineResult.style.display = 'block';
            combineResult.innerHTML = `
                <div class="mb-4">
                    <h3 class="compound-name">${interaction.name}</h3>
                    <div class="text-sm text-gray-600 mb-2">
                        <i class="fas fa-handshake mr-1"></i> Jenis Interaksi: ${interaction.type.toUpperCase()}
                    </div>
                    <p class="compound-description">${interaction.description}</p>
                    <div class="flex flex-wrap gap-2 mt-2">
                        ${components.map(c => `
                            <span class="px-2 py-1 text-xs rounded-full ${c.colorClass} text-white">
                                ${c.symbol}: ${c.name}
                            </span>
                        `).join('')}
                    </div>
                </div>
                
                <div class="compound-properties">
                    ${interaction.details.map(detail => `
                        <div class="compound-prop">
                            <i class="fas fa-check-circle text-green-500 mr-1"></i> ${detail}
                        </div>
                    `).join('')}
                </div>
                
                <div class="mt-4 text-xs text-gray-600">
                    <p><i class="fas fa-lightbulb text-yellow-500 mr-1"></i> 
                    ${getInteractionTip(interaction, components)}</p>
                </div>
                
                <button id="new-experiment" class="w-full mt-4 bg-teal-500 text-white py-2 rounded-lg font-bold">
                    <i class="fas fa-redo mr-2"></i>Interaksi Baru
                </button>
            `;
            
            // Scroll ke hasil
            combineResult.scrollIntoView({ behavior: 'smooth' });
            
            // Event listener untuk tombol interaksi baru
            document.getElementById('new-experiment').addEventListener('click', () => {
                selectedComponents = [];
                updateSelectedComponentsDisplay();
                updateCombineButton();
                updateStatusMessage();
                highlightSelectedComponents();
                combineResult.style.display = 'none';
            });
        }

        // Dapatkan tips tentang interaksi
        function getInteractionTip(interaction, components) {
            const tips = [
                "Interaksi ini penting untuk homeostasis tubuh.",
                "Gangguan pada interaksi ini dapat menyebabkan penyakit.",
                "Interaksi diatur secara ketat oleh sistem endokrin.",
                "Nutrisi yang tepat mendukung interaksi optimal.",
                "Interaksi ini dapat dipengaruhi oleh obat-obatan tertentu."
            ];
            
            // Tips khusus berdasarkan jenis interaksi
            if (interaction.type.includes("imunitas")) {
                return "Interaksi imunitas melindungi tubuh dari infeksi dan penyakit.";
            } else if (interaction.name.includes("Pembekuan")) {
                return "Pembekuan darah mencegah kehilangan darah berlebihan saat cedera.";
            } else if (interaction.name.includes("Oksigen")) {
                return "Transport oksigen vital untuk metabolisme sel seluruh tubuh.";
            }
            
            return tips[Math.floor(Math.random() * tips.length)];
        }

        // Tampilkan detail komponen dalam modal
        function showComponentDetails(component) {
            const categoryNames = {
                "erythrocyte": "Eritrosit (Sel Darah Merah)",
                "leukocyte": "Leukosit (Sel Darah Putih)",
                "granulocyte": "Granulosit",
                "agranulocyte": "Agranulosit",
                "lymphocyte": "Limfosit",
                "monocyte": "Monosit",
                "thrombocyte": "Trombosit (Keping Darah)",
                "plasma": "Plasma Darah",
                "hemoglobin": "Hemoglobin",
                "stem-cell": "Sel Punca Hematopoietik"
            };
            
            modalBody.innerHTML = `
                <div class="element-detail-card" style="border-left-color: ${getCategoryColor(component.category)}; background-color: ${getCategoryColor(component.category, 0.1)}">
                    <div class="flex items-center mb-4">
                        <div class="element-cell ${component.colorClass} w-16 h-16 mr-4">
                            <div class="element-number">${component.number}</div>
                            <div class="element-symbol text-xl">${component.symbol}</div>
                            <div class="element-name">${component.name}</div>
                        </div>
                        <div>
                            <h2 class="text-xl font-bold text-gray-800">${component.name}</h2>
                            <p class="text-gray-600 text-sm">${component.symbol} • ${categoryNames[component.category] || component.category}</p>
                        </div>
                    </div>
                    
                    <div class="space-y-2">
                        <div class="detail-row">
                            <span class="detail-label">Jumlah Normal:</span>
                            <span class="detail-value">${component.count}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Masa Hidup:</span>
                            <span class="detail-value">${component.lifespan}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Fungsi Utama:</span>
                            <span class="detail-value">${component.function}</span>
                        </div>
                        ${component.size ? `
                        <div class="detail-row">
                            <span class="detail-label">Ukuran:</span>
                            <span class="detail-value">${component.size}</span>
                        </div>
                        ` : ''}
                        ${component.composition ? `
                        <div class="detail-row">
                            <span class="detail-label">Komposisi:</span>
                            <span class="detail-value">${component.composition}</span>
                        </div>
                        ` : ''}
                        ${component.structure ? `
                        <div class="detail-row">
                            <span class="detail-label">Struktur:</span>
                            <span class="detail-value">${component.structure}</span>
                        </div>
                        ` : ''}
                        ${component.location ? `
                        <div class="detail-row">
                            <span class="detail-label">Lokasi Produksi:</span>
                            <span class="detail-value">${component.location}</span>
                        </div>
                        ` : ''}
                    </div>
                    
                    <div class="mt-4 p-3 bg-gray-50 rounded-lg">
                        <h4 class="font-bold text-gray-700 mb-1 text-sm">Fakta Menarik:</h4>
                        <p class="text-xs text-gray-600">${getComponentFact(component)}</p>
                    </div>
                    
                    ${currentTab === 'combine' ? `
                    <button id="select-for-combine" class="w-full mt-4 bg-teal-500 text-white py-2 rounded-lg font-bold">
                        <i class="fas fa-plus mr-2"></i>Pilih untuk Interaksi
                    </button>
                    ` : ''}
                </div>
            `;
            
            // Tambahkan event listener untuk tombol pilih jika di mode combine
            if (currentTab === 'combine') {
                const selectBtn = document.getElementById('select-for-combine');
                selectBtn.addEventListener('click', () => {
                    selectComponentForInteraction(component);
                    elementModal.classList.add('hidden');
                    
                    // Switch ke tab combine jika belum
                    if (currentTab !== 'combine') {
                        switchTab('combine');
                    }
                });
            }
            
            elementModal.classList.remove('hidden');
        }

        // Tampilkan sistem imun
        function showImmuneSystem() {
            const immuneComponents = bloodComponents.filter(c => 
                c.category === 'granulocyte' || 
                c.category === 'lymphocyte' || 
                c.category === 'monocyte' ||
                c.symbol === 'GLOB'
            );
            showSpecialComponents(immuneComponents, "Sistem Imun");
        }

        // Tampilkan komponen plasma
        function showPlasmaComponents() {
            const plasmaComponents = bloodComponents.filter(c => 
                c.category === 'plasma' || 
                c.symbol === 'HGB'
            );
            showSpecialComponents(plasmaComponents, "Komponen Plasma Darah");
        }

        // Tampilkan komponen khusus
        function showSpecialComponents(components, title) {
            specialModalBody.innerHTML = `
                <div class="mb-4">
                    <h2 class="text-xl font-bold text-gray-800 mb-2">${title}</h2>
                    <p class="text-gray-600 text-sm mb-4">Komponen penting dalam sistem peredaran darah</p>
                </div>
                <div class="grid grid-cols-3 gap-2 mb-4">
                    ${components.map(component => `
                        <div class="element-cell ${component.colorClass} w-full" onclick="showComponentDetailsFromModal(${component.number})">
                            <div class="element-number">${component.number}</div>
                            <div class="element-symbol">${component.symbol}</div>
                            <div class="element-name text-xs">${component.name}</div>
                        </div>
                    `).join('')}
                </div>
                <div class="text-xs text-gray-500">
                    <p>• Komponen ini bekerja sama dalam sistem terintegrasi</p>
                    <p>• Gangguan pada satu komponen dapat mempengaruhi yang lain</p>
                    <p>• Diatur oleh mekanisme homeostasis yang kompleks</p>
                </div>
            `;
            
            specialModal.classList.remove('hidden');
        }

        // Helper untuk showComponentDetails dari modal khusus
        window.showComponentDetailsFromModal = function(number) {
            const component = bloodComponents.find(c => c.number === number);
            if (component) {
                specialModal.classList.add('hidden');
                showComponentDetails(component);
            }
        };

        // Fungsi untuk berpindah tab
        function switchTab(tabName) {
            // Update tab aktif
            tabs.forEach(tab => {
                if (tab.dataset.tab === tabName) {
                    tab.classList.add('active');
                } else {
                    tab.classList.remove('active');
                }
            });
            
            // Update konten tab aktif
            tabContents.forEach(content => {
                if (content.id === `${tabName}-tab`) {
                    content.classList.add('active');
                } else {
                    content.classList.remove('active');
                }
            });
            
            currentTab = tabName;
            
            // Scroll ke atas
            window.scrollTo(0, 0);
        }

        // Dapatkan warna berdasarkan kategori
        function getCategoryColor(category, opacity = 1) {
            const colors = {
                "erythrocyte": "#ff6b6b",
                "leukocyte": "#42a5f5",
                "granulocyte": "#7e57c2",
                "agranulocyte": "#66bb6a",
                "lymphocyte": "#ffa726",
                "monocyte": "#26c6da",
                "thrombocyte": "#ec407a",
                "plasma": "#ffca28",
                "hemoglobin": "#5c6bc0",
                "stem-cell": "#ab47bc"
            };
            
            const color = colors[category] || "#cccccc";
            if (opacity < 1) {
                const r = parseInt(color.slice(1, 3), 16);
                const g = parseInt(color.slice(3, 5), 16);
                const b = parseInt(color.slice(5, 7), 16);
                return `rgba(${r}, ${g}, ${b}, ${opacity})`;
            }
            return color;
        }

        // Dapatkan fakta menarik tentang komponen
        function getComponentFact(component) {
            const facts = {
                "RBC": "Tidak memiliki inti sel, berbentuk bikonkaf untuk meningkatkan luas permukaan.",
                "NEUT": "Sel imun paling melimpah, dapat meninggalkan pembuluh darah untuk melawan infeksi.",
                "LYMP": "Dapat hidup bertahun-tahun, membentuk memori imunologis untuk infeksi ulang.",
                "PLT": "Bukan sel lengkap, melainkan fragmen sitoplasma dari megakariosit.",
                "PLAS": "Cairan kekuningan yang merupakan 55% volume darah total.",
                "HGB": "Mengandung atom besi yang mengikat oksigen, memberikan warna merah pada darah.",
                "HSC": "Dapat berdiferensiasi menjadi semua jenis sel darah, kemampuan regenerasi tinggi."
            };
            
            return facts[component.symbol] || `Komponen penting dalam homeostasis tubuh.`;
        }

        // Setup event listeners
        function setupEventListeners() {
            // Tutup modal
            closeModalBtn.addEventListener('click', () => {
                elementModal.classList.add('hidden');
            });
            
            closeSpecialModalBtn.addEventListener('click', () => {
                specialModal.classList.add('hidden');
            });
            
            // Tutup modal dengan klik di luar konten
            elementModal.addEventListener('click', (e) => {
                if (e.target === elementModal) {
                    elementModal.classList.add('hidden');
                }
            });
            
            specialModal.addEventListener('click', (e) => {
                if (e.target === specialModal) {
                    specialModal.classList.add('hidden');
                }
            });
            
            // Tutup modal dengan tombol ESC
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    if (!elementModal.classList.contains('hidden')) {
                        elementModal.classList.add('hidden');
                    }
                    if (!specialModal.classList.contains('hidden')) {
                        specialModal.classList.add('hidden');
                    }
                }
            });
            
            // Pencarian komponen
            searchInput.addEventListener('input', (e) => {
                const searchTerm = e.target.value.toLowerCase().trim();
                
                // Sembunyikan semua komponen dulu
                document.querySelectorAll('.element-cell').forEach(cell => {
                    if (cell.dataset.symbol) {
                        cell.style.opacity = '0.3';
                        cell.style.transform = 'scale(0.95)';
                    }
                });
                
                // Jika kosong, tampilkan semua
                if (!searchTerm) {
                    document.querySelectorAll('.element-cell').forEach(cell => {
                        if (cell.dataset.symbol) {
                            cell.style.opacity = '1';
                            cell.style.transform = 'scale(1)';
                        }
                    });
                    return;
                }
                
                // Tampilkan komponen yang cocok
                let found = false;
                bloodComponents.forEach(component => {
                    if (component.symbol.toLowerCase().includes(searchTerm) || 
                        component.name.toLowerCase().includes(searchTerm) ||
                        component.number.toString().includes(searchTerm)) {
                        
                        const cells = document.querySelectorAll(`[data-symbol="${component.symbol}"]`);
                        cells.forEach(cell => {
                            cell.style.opacity = '1';
                            cell.style.transform = 'scale(1.05)';
                            cell.style.zIndex = '10';
                            cell.style.boxShadow = '0 0 8px rgba(0,0,0,0.2)';
                        });
                        found = true;
                    }
                });
                
                // Jika tidak ditemukan, reset semua
                if (!found) {
                    document.querySelectorAll('.element-cell').forEach(cell => {
                        if (cell.dataset.symbol) {
                            cell.style.opacity = '1';
                            cell.style.transform = 'scale(1)';
                            cell.style.zIndex = '1';
                            cell.style.boxShadow = '';
                        }
                    });
                }
            });
            
            // Fokus pada input pencarian dengan shortcut Ctrl+F
            document.addEventListener('keydown', (e) => {
                if ((e.ctrlKey || e.metaKey) && e.key === 'f') {
                    e.preventDefault();
                    searchInput.focus();
                }
            });
            
            // Tombol untuk sistem imun dan plasma
            showImmuneBtn.addEventListener('click', showImmuneSystem);
            showPlasmaBtn.addEventListener('click', showPlasmaComponents);
            
            // Tombol untuk sistem interaksi
            combineBtn.addEventListener('click', showComponentInteraction);
            
            clearBtn.addEventListener('click', () => {
                selectedComponents = [];
                updateSelectedComponentsDisplay();
                updateCombineButton();
                updateStatusMessage();
                highlightSelectedComponents();
                combineResult.style.display = 'none';
                showStatusMessage("Semua komponen telah dihapus", "info");
            });
            
            // Tab switching
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    switchTab(tab.dataset.tab);
                });
            });
        }

        // Inisialisasi ketika halaman dimuat
        document.addEventListener('DOMContentLoaded', initBloodComponentsTable);
    </script>
</body>
</html>
