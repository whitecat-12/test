<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TETA SAINS - Jenis Hormon Tubuh</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #38b2ac;
            --secondary: #0e7490;
            --accent: #f59e0b;
        }
        
        body {
            font-family: 'Baloo 2', cursive;
            background-color: #f8fafc;
        }
        
        .app-container {
            max-width: 414px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            position: relative;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        
        /* NAVBAR - TIDAK DIRUBAH */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            width: 100%;
            max-width: 414px;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
            background: white;
            z-index: 10;
            height: 70px;
            display: flex;
            align-items: center;
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #6b7280;
            text-decoration: none;
            flex: 1;
            height: 100%;
            padding: 0.5rem 0;
            transition: all 0.3s ease;
        }
        
        .nav-item span {
            font-size: 0.75rem;
            margin-top: 0.25rem;
        }
        
        .nav-item.active {
            color: var(--primary);
        }
        
        .nav-icon {
            transition: all 0.3s ease;
            font-size: 1.25rem;
        }
        
        .nav-icon.active {
            transform: translateY(-5px);
            color: var(--primary);
        }
        
        /* TABLE STYLES */
        .periodic-table {
            display: grid;
            grid-template-columns: repeat(18, 1fr);
            gap: 2px;
            padding: 5px;
            overflow-x: auto;
        }
        
        .element-cell {
            min-width: 35px;
            height: 35px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }
        
        .element-cell:hover {
            transform: scale(1.05);
            z-index: 2;
            box-shadow: 0 3px 6px rgba(0,0,0,0.15);
        }
        
        .element-cell.selected {
            border: 2px solid #f59e0b;
            box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.2);
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(245, 158, 11, 0.4); }
            70% { box-shadow: 0 0 0 5px rgba(245, 158, 11, 0); }
            100% { box-shadow: 0 0 0 0 rgba(245, 158, 11, 0); }
        }
        
        .element-number {
            position: absolute;
            top: 2px;
            left: 3px;
            font-size: 7px;
            font-weight: bold;
        }
        
        .element-symbol {
            font-size: 12px;
            font-weight: 800;
            line-height: 1;
        }
        
        .element-name {
            font-size: 5px;
            margin-top: 1px;
            text-align: center;
            display: none;
        }
        
        .element-cell:hover .element-name {
            display: block;
        }
        
        /* Legend styles */
        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
        }
        
        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 3px;
            margin-right: 8px;
            flex-shrink: 0;
        }
        
        /* HORMONE CATEGORY COLORS */
        .peptide-hormone { background-color: #ff6b6b; color: white; }
        .steroid-hormone { background-color: #ffa726; color: white; }
        .amine-hormone { background-color: #42a5f5; color: white; }
        .protein-hormone { background-color: #66bb6a; color: white; }
        .glycoprotein-hormone { background-color: #ab47bc; color: white; }
        .thyroid-hormone { background-color: #26c6da; color: white; }
        .gastrointestinal-hormone { background-color: #ffca28; color: #000; }
        .reproductive-hormone { background-color: #ec407a; color: white; }
        .stress-hormone { background-color: #7e57c2; color: white; }
        .growth-hormone { background-color: #5c6bc0; color: white; }
        
        /* Modal styles */
        .element-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0,0,0,0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100;
            padding: 20px;
        }
        
        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 20px;
            max-width: 350px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }
        
        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
        }
        
        .app-logo {
            display: flex;
            align-items: center;
        }
        
        .app-logo-icon {
            background: #9999ff;
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 8px;
        }
        
        .app-name {
            font-weight: 700;
            font-size: 1.25rem;
            color: #9999ff;
        }
        
        /* Element detail styles */
        .element-detail-card {
            border-radius: 12px;
            padding: 15px;
            margin-top: 10px;
        }
        
        .detail-row {
            display: flex;
            justify-content: space-between;
            padding: 6px 0;
            border-bottom: 1px solid #eee;
        }
        
        .detail-label {
            font-weight: 600;
            color: #666;
            font-size: 14px;
        }
        
        .detail-value {
            font-weight: 700;
            color: #333;
            font-size: 14px;
        }
        
        /* Scrollbar styling */
        .periodic-table::-webkit-scrollbar {
            height: 6px;
        }
        
        .periodic-table::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }
        
        .periodic-table::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 3px;
        }
        
        /* Group labels */
        .group-label {
            font-size: 10px;
            text-align: center;
            color: #666;
            margin-bottom: 5px;
            font-weight: 600;
        }
        
        /* Period labels */
        .period-label {
            font-size: 10px;
            text-align: right;
            color: #666;
            font-weight: 600;
            padding-right: 5px;
            width: 20px;
        }
        
        /* Layout grid untuk tabel dengan label */
        .table-container {
            display: flex;
            flex-direction: column;
        }
        
        .table-header {
            display: grid;
            grid-template-columns: 20px repeat(18, 1fr);
            gap: 2px;
            margin-bottom: 5px;
        }
        
        .table-body {
            display: flex;
        }
        
        .period-labels {
            display: flex;
            flex-direction: column;
            gap: 2px;
            margin-right: 5px;
        }
        
        .period-row {
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* Combine System Styles */
        .combine-panel {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 15px;
        }
        
        .selected-elements {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 15px;
            min-height: 40px;
        }
        
        .selected-element-badge {
            background: white;
            color: #333;
            padding: 5px 10px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            font-size: 14px;
            font-weight: 600;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .selected-element-badge .remove-btn {
            background: none;
            border: none;
            color: #ff6b6b;
            margin-left: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        
        .combine-result {
            background: white;
            color: #333;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            display: none;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .compound-name {
            font-size: 18px;
            font-weight: 700;
            color: #333;
            margin-bottom: 5px;
        }
        
        .compound-formula {
            font-size: 24px;
            font-weight: 800;
            color: #4f46e5;
            margin-bottom: 10px;
        }
        
        .compound-description {
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
        }
        
        .compound-properties {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            font-size: 12px;
        }
        
        .compound-prop {
            background: #f8fafc;
            padding: 8px;
            border-radius: 6px;
        }
        
        .combine-actions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .combine-btn {
            flex: 1;
            background: #f59e0b;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .combine-btn:hover {
            background: #d97706;
        }
        
        .combine-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }
        
        .clear-btn {
            background: #ef4444;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .clear-btn:hover {
            background: #dc2626;
        }
        
        .status-message {
            text-align: center;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
            margin-top: 5px;
            min-height: 16px;
        }
        
        /* Tab Styles */
        .tab-container {
            display: flex;
            background: #f1f5f9;
            border-radius: 10px;
            padding: 5px;
            margin-bottom: 15px;
        }
        
        .tab {
            flex: 1;
            text-align: center;
            padding: 8px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }
        
        .tab.active {
            background: white;
            color: #4f46e5;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }
    </style>
</head>
<body>
    <!-- Mobile App Container -->
    <div class="app-container">
        <!-- App Header -->
        <header class="bg-gradient-to-r from-primary to-secondary p-4 text-white">
            <div class="flex justify-between items-center">
                <div class="app-logo">
                    <div class="app-logo-icon">
                        <i class="fas fa-heartbeat"></i>
                    </div>
                    <h1 class="app-name">QUANTARA</h1>
                </div>
                <div class="flex items-center space-x-3">
                    <i class="fas fa-search"></i>
                    <i class="fas fa-user-circle text-xl"></i>
                </div>
            </div>
        </header>
        
        <!-- Main Content -->
        <main class="pb-24 p-4">
            <!-- Page Title -->
            <div class="mb-4">
                <h1 class="text-xl font-bold text-gray-800 mb-1">
                    <i class="fas fa-heartbeat text-teal-500 mr-2"></i> Jenis Hormon Tubuh
                </h1>
                <p class="text-gray-600 text-sm">
                    Katalog hormon tubuh manusia lengkap
                </p>
            </div>
            
            <!-- Tabs -->
            <div class="tab-container">
                <div class="tab active" data-tab="table">Tabel Hormon</div>
                <div class="tab" data-tab="combine">Interaksi Hormon</div>
            </div>
            
            <!-- Tab Content: Table -->
            <div id="table-tab" class="tab-content active">
                <!-- Search Bar -->
                <div class="mb-4">
                    <div class="relative">
                        <input type="text" id="search-element" placeholder="Cari hormon..." 
                               class="w-full p-3 pl-10 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-teal-500 text-sm">
                        <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                    </div>
                </div>
                
                <!-- Tabel Periodik -->
                <div class="mb-6">
                    <div class="flex justify-between items-center mb-3">
                        <h3 class="font-bold text-gray-700 text-sm flex items-center">
                            <i class="fas fa-heartbeat text-blue-500 mr-2 text-xs"></i> Hormon Tubuh
                        </h3>
                        <div class="text-xs text-gray-500">
                            <span id="total-elements">48</span> hormon
                        </div>
                    </div>
                    
                    <div class="bg-white border border-gray-200 rounded-xl p-3">
                        <div class="table-container">
                            <!-- Header untuk golongan -->
                            <div class="table-header">
                                <div></div> <!-- Kolom kosong untuk label periode -->
                                <div class="group-label">1</div>
                                <div class="group-label">2</div>
                                <div class="group-label">3</div>
                                <div class="group-label">4</div>
                                <div class="group-label">5</div>
                                <div class="group-label">6</div>
                                <div class="group-label">7</div>
                                <div class="group-label">8</div>
                                <div class="group-label">9</div>
                                <div class="group-label">10</div>
                                <div class="group-label">11</div>
                                <div class="group-label">12</div>
                                <div class="group-label">13</div>
                                <div class="group-label">14</div>
                                <div class="group-label">15</div>
                                <div class="group-label">16</div>
                                <div class="group-label">17</div>
                                <div class="group-label">18</div>
                            </div>
                            
                            <div class="table-body">
                                <!-- Label periode -->
                                <div class="period-labels">
                                    <div class="period-row"></div> <!-- Baris kosong untuk header -->
                                    <div class="period-row">1</div>
                                    <div class="period-row">2</div>
                                    <div class="period-row">3</div>
                                    <div class="period-row">4</div>
                                    <div class="period-row">5</div>
                                    <div class="period-row">6</div>
                                    <div class="period-row">7</div>
                                </div>
                                
                                <!-- Tabel periodik utama -->
                                <div id="periodic-table" class="periodic-table">
                                    <!-- Elements will be generated by JavaScript -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- Note untuk hormon khusus -->
                        <div class="mt-4 text-center">
                            <div class="text-xs text-gray-500 mb-2">
                                * Hormon steroid dan peptida ditampilkan terpisah
                            </div>
                            <div class="flex justify-center space-x-4">
                                <button id="show-lanthanides" class="text-xs bg-purple-100 text-purple-700 px-3 py-1 rounded-full">
                                    Lihat Hormon Steroid
                                </button>
                                <button id="show-actinides" class="text-xs bg-blue-100 text-blue-700 px-3 py-1 rounded-full">
                                    Lihat Hormon Peptida
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Legend - Dipindah ke bawah tabel -->
                <div class="mb-6 p-3 bg-gray-50 rounded-xl">
                    <h3 class="font-bold text-gray-700 mb-2 text-sm">Kategori Warna:</h3>
                    <div class="grid grid-cols-2 gap-1">
                        <div class="legend-item">
                            <div class="legend-color peptide-hormone"></div>
                            <span class="text-xs">Hormon Peptida</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color steroid-hormone"></div>
                            <span class="text-xs">Hormon Steroid</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color amine-hormone"></div>
                            <span class="text-xs">Hormon Amina</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color protein-hormone"></div>
                            <span class="text-xs">Hormon Protein</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color glycoprotein-hormone"></div>
                            <span class="text-xs">Hormon Glikoprotein</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color thyroid-hormone"></div>
                            <span class="text-xs">Hormon Tiroid</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color gastrointestinal-hormone"></div>
                            <span class="text-xs">Hormon Pencernaan</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color reproductive-hormone"></div>
                            <span class="text-xs">Hormon Reproduksi</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Tab Content: Combine Elements -->
            <div id="combine-tab" class="tab-content">
                <div class="combine-panel">
                    <h3 class="font-bold text-lg mb-3">
                        <i class="fas fa-sync-alt mr-2"></i>Interaksi Hormon
                    </h3>
                    <p class="text-sm mb-4">
                        Pilih 2-3 hormon untuk melihat interaksi dan efek sinergisnya.
                        Klik pada hormon di tabel untuk memilih.
                    </p>
                    
                    <div class="selected-elements" id="selected-elements">
                        <div class="text-sm text-center w-full py-2" id="empty-selection">
                            Belum ada hormon dipilih
                        </div>
                    </div>
                    
                    <div class="combine-actions">
                        <button id="combine-btn" class="combine-btn" disabled>
                            <i class="fas fa-bolt mr-2"></i>Analisis Interaksi
                        </button>
                        <button id="clear-btn" class="clear-btn">
                            <i class="fas fa-trash mr-2"></i>Hapus
                        </button>
                    </div>
                    
                    <div class="status-message" id="status-message">
                        Pilih 2 atau 3 hormon untuk menganalisis interaksi
                    </div>
                </div>
                
                <div id="combine-result" class="combine-result">
                    <!-- Results will be displayed here -->
                </div>
                
                <div class="bg-white border border-gray-200 rounded-xl p-3 mt-4">
                    <h3 class="font-bold text-gray-700 mb-3 text-sm flex items-center">
                        <i class="fas fa-heartbeat text-blue-500 mr-2 text-xs"></i> Hormon yang Tersedia
                    </h3>
                    <div class="table-container">
                        <div id="combine-periodic-table" class="periodic-table">
                            <!-- Elements for combine mode will be generated -->
                        </div>
                    </div>
                    <p class="text-xs text-gray-500 mt-3 text-center">
                        Klik pada hormon untuk memilih/dipilih ulang
                    </p>
                </div>
            </div>
            
            <!-- Quick Facts -->
            <div class="mb-6 p-3 bg-teal-50 rounded-xl">
                <h3 class="font-bold text-gray-700 mb-2 text-sm flex items-center">
                    <i class="fas fa-lightbulb text-teal-500 mr-2 text-xs"></i> Fakta Menarik
                </h3>
                <div class="text-xs text-gray-700 space-y-1">
                    <p>• Hormon berasal dari bahasa Yunani "hormaein" yang berarti membangkitkan</p>
                    <p>• Insulin ditemukan pada tahun 1921 oleh Banting dan Best</p>
                    <p>• Ada lebih dari 50 hormon yang berbeda dalam tubuh manusia</p>
                    <p>• Hormon bekerja dalam konsentrasi yang sangat kecil</p>
                </div>
            </div>
        </main>
        
        <!-- Element Detail Modal -->
        <div id="element-modal" class="element-modal hidden">
            <div class="modal-content">
                <button id="close-modal" class="close-modal">&times;</button>
                <div id="modal-body"></div>
            </div>
        </div>
        
        <!-- Modal untuk Lantanida/Aktinida -->
        <div id="special-modal" class="element-modal hidden">
            <div class="modal-content">
                <button id="close-special-modal" class="close-modal">&times;</button>
                <div id="special-modal-body"></div>
            </div>
        </div>
        
        <!-- Bottom Navigation -->
    <nav class="bottom-nav">
      <a href="../dashboard siswa.html" class="nav-item">
        <i class="fas fa-home nav-icon"></i>
        <span>Beranda</span>
      </a>
      <a href="../soal harian/dashboard soal.html" class="nav-item">
        <i class="fas fa-flask nav-icon"></i>
        <span>Soal Harian</span>
      </a>
      <a href="../ai/nayra.html" class="nav-item">
        <i class="fas fa-robot nav-icon"></i>
        <span>Nayra AI</span>
      </a>
      <a href="../materi harian/kategori materi.html" class="nav-item">
        <i class="fas fa-chalkboard-teacher nav-icon"></i>
        <span>Materi Harian</span>
      </a>
      <a href="../profil/profil.html" class="nav-item">
        <i class="fas fa-user nav-icon"></i>
        <span>Profil</span>
      </a>
    </nav>
    </div>

    <script>
        // Data Hormon Tubuh Lengkap
        const periodicElements = [
            // Hormon Hipofisis (Kelenjar Pituitari)
            { symbol: "GH", name: "Growth Hormone", number: 1, mass: 22.0, category: "protein-hormone", colorClass: "protein-hormone", period: 1, group: 1, electronConfig: "191 aa", valence: "Pertumbuhan" },
            { symbol: "TSH", name: "Thyroid Stimulating", number: 2, mass: 28.0, category: "glycoprotein-hormone", colorClass: "glycoprotein-hormone", period: 1, group: 2, electronConfig: "α,β subunit", valence: "Stimulasi tiroid" },
            { symbol: "ACTH", name: "Adrenocorticotropic", number: 3, mass: 4.5, category: "peptide-hormone", colorClass: "peptide-hormone", period: 1, group: 3, electronConfig: "39 aa", valence: "Stimulasi adrenal" },
            { symbol: "PRL", name: "Prolaktin", number: 4, mass: 23.0, category: "protein-hormone", colorClass: "protein-hormone", period: 1, group: 4, electronConfig: "198 aa", valence: "Laktasi" },
            { symbol: "FSH", name: "Follicle Stimulating", number: 5, mass: 30.0, category: "glycoprotein-hormone", colorClass: "glycoprotein-hormone", period: 1, group: 5, electronConfig: "α,β subunit", valence: "Gametogenesis" },
            { symbol: "LH", name: "Luteinizing Hormone", number: 6, mass: 28.5, category: "glycoprotein-hormone", colorClass: "glycoprotein-hormone", period: 1, group: 6, electronConfig: "α,β subunit", valence: "Ovulasi" },
            { symbol: "ADH", name: "Vasopressin", number: 7, mass: 1.1, category: "peptide-hormone", colorClass: "peptide-hormone", period: 1, group: 7, electronConfig: "9 aa", valence: "Retensi air" },
            { symbol: "OXT", name: "Oksitosin", number: 8, mass: 1.0, category: "peptide-hormone", colorClass: "peptide-hormone", period: 1, group: 8, electronConfig: "9 aa", valence: "Kontraksi uterus" },
            
            // Hormon Tiroid dan Paratiroid
            { symbol: "T4", name: "Tiroksin", number: 9, mass: 777.0, category: "thyroid-hormone", colorClass: "thyroid-hormone", period: 2, group: 1, electronConfig: "Iodinated", valence: "Metabolisme" },
            { symbol: "T3", name: "Triiodothyronine", number: 10, mass: 651.0, category: "thyroid-hormone", colorClass: "thyroid-hormone", period: 2, group: 2, electronConfig: "Iodinated", valence: "Metabolisme" },
            { symbol: "CT", name: "Kalsitonin", number: 11, mass: 3.4, category: "peptide-hormone", colorClass: "peptide-hormone", period: 2, group: 3, electronConfig: "32 aa", valence: "Kalsium darah" },
            { symbol: "PTH", name: "Parathormon", number: 12, mass: 9.5, category: "protein-hormone", colorClass: "protein-hormone", period: 2, group: 4, electronConfig: "84 aa", valence: "Kalsium darah" },
            
            // Hormon Adrenal (Kelenjar Anak Ginjal)
            { symbol: "ALD", name: "Aldosteron", number: 13, mass: 360.4, category: "steroid-hormone", colorClass: "steroid-hormone", period: 2, group: 5, electronConfig: "C21 steroid", valence: "Keseimbangan garam" },
            { symbol: "COR", name: "Kortisol", number: 14, mass: 362.5, category: "steroid-hormone", colorClass: "steroid-hormone", period: 2, group: 6, electronConfig: "C21 steroid", valence: "Stres, metabolisme" },
            { symbol: "ADR", name: "Adrenalin", number: 15, mass: 183.2, category: "amine-hormone", colorClass: "amine-hormone", period: 2, group: 7, electronConfig: "Katekolamin", valence: "Fight or flight" },
            { symbol: "NOR", name: "Noradrenalin", number: 16, mass: 169.2, category: "amine-hormone", colorClass: "amine-hormone", period: 2, group: 8, electronConfig: "Katekolamin", valence: "Tekanan darah" },
            
            // Hormon Pankreas
            { symbol: "INS", name: "Insulin", number: 17, mass: 5.8, category: "protein-hormone", colorClass: "protein-hormone", period: 3, group: 1, electronConfig: "51 aa", valence: "Glukosa darah" },
            { symbol: "GLU", name: "Glukagon", number: 18, mass: 3.5, category: "peptide-hormone", colorClass: "peptide-hormone", period: 3, group: 2, electronConfig: "29 aa", valence: "Glukosa darah" },
            { symbol: "SST", name: "Somatostatin", number: 19, mass: 1.6, category: "peptide-hormone", colorClass: "peptide-hormone", period: 3, group: 3, electronConfig: "14 aa", valence: "Inhibitor hormon" },
            { symbol: "PP", name: "Pancreatic Polypeptide", number: 20, mass: 4.2, category: "peptide-hormone", colorClass: "peptide-hormone", period: 3, group: 4, electronConfig: "36 aa", valence: "Pencernaan" },
            
            // Hormon Reproduksi
            { symbol: "EST", name: "Estrogen", number: 21, mass: 272.4, category: "steroid-hormone", colorClass: "steroid-hormone", period: 3, group: 5, electronConfig: "C18 steroid", valence: "Karakteristik wanita" },
            { symbol: "PRO", name: "Progesteron", number: 22, mass: 314.5, category: "steroid-hormone", colorClass: "steroid-hormone", period: 3, group: 6, electronConfig: "C21 steroid", valence: "Kehamilan" },
            { symbol: "TES", name: "Testosteron", number: 23, mass: 288.4, category: "steroid-hormone", colorClass: "steroid-hormone", period: 3, group: 7, electronConfig: "C19 steroid", valence: "Karakteristik pria" },
            { symbol: "HCG", name: "Human Chorionic", number: 24, mass: 36.7, category: "glycoprotein-hormone", colorClass: "glycoprotein-hormone", period: 3, group: 8, electronConfig: "α,β subunit", valence: "Kehamilan" },
            
            // Hormon Pencernaan
            { symbol: "GAS", name: "Gastrin", number: 25, mass: 2.2, category: "peptide-hormone", colorClass: "peptide-hormone", period: 4, group: 1, electronConfig: "17 aa", valence: "Asam lambung" },
            { symbol: "SEC", name: "Sekretin", number: 26, mass: 3.1, category: "peptide-hormone", colorClass: "peptide-hormone", period: 4, group: 2, electronConfig: "27 aa", valence: "Sekresi pankreas" },
            { symbol: "CCK", name: "Cholecystokinin", number: 27, mass: 3.9, category: "peptide-hormone", colorClass: "peptide-hormone", period: 4, group: 3, electronConfig: "33 aa", valence: "Empedu, pankreas" },
            { symbol: "GIP", name: "Gastric Inhibitory", number: 28, mass: 4.9, category: "peptide-hormone", colorClass: "peptide-hormone", period: 4, group: 4, electronConfig: "42 aa", valence: "Inhibisi gastrin" },
            
            // Hormon Lainnya
            { symbol: "MEL", name: "Melatonin", number: 29, mass: 232.3, category: "amine-hormone", colorClass: "amine-hormone", period: 4, group: 5, electronConfig: "Triptofan derivatif", valence: "Ritme sirkadian" },
            { symbol: "LEP", name: "Leptin", number: 30, mass: 16.0, category: "protein-hormone", colorClass: "protein-hormone", period: 4, group: 6, electronConfig: "167 aa", valence: "Nafsu makan" },
            { symbol: "ERY", name: "Eritropoietin", number: 31, mass: 34.0, category: "glycoprotein-hormone", colorClass: "glycoprotein-hormone", period: 4, group: 7, electronConfig: "165 aa", valence: "Produksi sel darah merah" },
            { symbol: "REN", name: "Renin", number: 32, mass: 37.0, category: "protein-hormone", colorClass: "protein-hormone", period: 4, group: 8, electronConfig: "340 aa", valence: "Tekanan darah" },
            
            // Hormon Lokal
            { symbol: "HIS", name: "Histamin", number: 33, mass: 111.1, category: "amine-hormone", colorClass: "amine-hormone", period: 5, group: 1, electronConfig: "Imidazol etilamin", valence: "Inflamasi" },
            { symbol: "SER", name: "Serotonin", number: 34, mass: 176.2, category: "amine-hormone", colorClass: "amine-hormone", period: 5, group: 2, electronConfig: "Triptamin", valence: "Suasana hati" },
            { symbol: "PRO", name: "Prostaglandin", number: 35, mass: 352.5, category: "lipid-hormone", colorClass: "steroid-hormone", period: 5, group: 3, electronConfig: "Asam lemak", valence: "Inflamasi, nyeri" },
            { symbol: "THR", name: "Tromboksan", number: 36, mass: 352.5, category: "lipid-hormone", colorClass: "steroid-hormone", period: 5, group: 4, electronConfig: "Asam lemak", valence: "Agregasi platelet" },
            
            // Hormon Tumbuh dan Faktor Pertumbuhan
            { symbol: "IGF", name: "Insulin-like Growth", number: 37, mass: 7.5, category: "protein-hormone", colorClass: "protein-hormone", period: 5, group: 5, electronConfig: "70 aa", valence: "Pertumbuhan sel" },
            { symbol: "NGF", name: "Nerve Growth Factor", number: 38, mass: 26.5, category: "protein-hormone", colorClass: "protein-hormone", period: 5, group: 6, electronConfig: "118 aa", valence: "Pertumbuhan saraf" },
            { symbol: "EGF", name: "Epidermal Growth", number: 39, mass: 6.0, category: "protein-hormone", colorClass: "protein-hormone", period: 5, group: 7, electronConfig: "53 aa", valence: "Proliferasi sel" },
            { symbol: "PDG", name: "Platelet-Derived", number: 40, mass: 30.0, category: "protein-hormone", colorClass: "protein-hormone", period: 5, group: 8, electronConfig: "110 aa", valence: "Penyembuhan luka" }
        ];

        // Data Interaksi Hormon
        const knownCompounds = [
            // Insulin dan Glukagon
            { elements: ["INS", "GLU"], formula: "INS + GLU", name: "Regulasi Glukosa", type: "antagonis", 
              description: "Insulin menurunkan gula darah, glukagon meningkatkannya. Kerja berlawanan untuk homeostasis.",
              properties: ["Insulin: anabolik", "Glukagon: katabolik", "Keseimbangan energi", "Regulasi metabolisme"] },
            
            // Kortisol dan Adrenalin
            { elements: ["COR", "ADR"], formula: "COR + ADR", name: "Respon Stres", type: "sinergis",
              description: "Keduanya meningkat saat stres. Kortisol untuk jangka panjang, adrenalin untuk respon cepat.",
              properties: ["Meningkatkan energi", "Meningkatkan kewaspadaan", "Sistem fight-or-flight", "Adaptasi stres"] },
            
            // Estrogen dan Progesteron
            { elements: ["EST", "PRO"], formula: "EST + PRO", name: "Siklus Menstruasi", type: "regulasi",
              description: "Mengatur siklus menstruasi dan persiapan endometrium untuk kehamilan.",
              properties: ["Estrogen: proliferasi", "Progesteron: sekresi", "Regulasi siklus", "Persiapan implantasi"] },
            
            // TSH dan T4
            { elements: ["TSH", "T4"], formula: "TSH → T4", name: "Aksis Tiroid", type: "stimulasi",
              description: "TSH merangsang tiroid menghasilkan T4. Mekanisme umpan balik negatif.",
              properties: ["TSH: stimulator", "T4: produk akhir", "Umpan balik negatif", "Regulasi metabolisme"] },
            
            // ACTH dan Kortisol
            { elements: ["ACTH", "COR"], formula: "ACTH → COR", name: "Aksis Adrenal", type: "stimulasi",
              description: "ACTH merangsang korteks adrenal menghasilkan kortisol.",
              properties: ["Stres mengaktifkan", "Diurnal rhythm", "Umpan balik negatif", "Aksis HPA"] },
            
            // FSH dan Estrogen
            { elements: ["FSH", "EST"], formula: "FSH → EST", name: "Folikulogenesis", type: "stimulasi",
              description: "FSH merangsang folikel ovarium menghasilkan estrogen.",
              properties: ["Pematangan folikel", "Peningkatan estrogen", "Umpan balik positif", "Ovulasi"] },
            
            // LH dan Testosteron
            { elements: ["LH", "TES"], formula: "LH → TES", name: "Spermatogenesis", type: "stimulasi",
              description: "LH merangsang sel Leydig testis menghasilkan testosteron.",
              properties: ["Produksi testosteron", "Spermatogenesis", "Karakteristik seks", "Libido"] },
            
            // GH dan IGF-1
            { elements: ["GH", "IGF"], formula: "GH → IGF", name: "Aksis Pertumbuhan", type: "stimulasi",
              description: "Growth Hormone merangsang produksi IGF-1 yang menyebabkan pertumbuhan.",
              properties: ["Pertumbuhan linear", "Proliferasi sel", "Metabolisme protein", "Pertumbuhan tulang"] },
            
            // PTH dan Kalsitonin
            { elements: ["PTH", "CT"], formula: "PTH + CT", name: "Regulasi Kalsium", type: "antagonis",
              description: "PTH meningkatkan kalsium darah, kalsitonin menurunkannya.",
              properties: ["PTH: resorpsi tulang", "Kalsitonin: deposisi", "Keseimbangan kalsium", "Homeostasis mineral"] },
            
            // Aldosteron dan ADH
            { elements: ["ALD", "ADH"], formula: "ALD + ADH", name: "Keseimbangan Cairan", type: "sinergis",
              description: "Keduanya meningkatkan retensi air dan natrium untuk tekanan darah.",
              properties: ["Retensi natrium", "Retensi air", "Tekanan darah", "Volume darah"] },
            
            // Insulin, Glukagon, dan Somatostatin
            { elements: ["INS", "GLU", "SST"], formula: "INS+GLU+SST", name: "Regulasi Pankreas", type: "regulasi",
              description: "Somatostatin menghambat sekresi insulin dan glukagon.",
              properties: ["Keseimbangan glukosa", "Regulasi sekresi", "Homeostasis metabolik", "Kontrol endokrin"] },
            
            // Kortisol, Adrenalin, dan Noradrenalin
            { elements: ["COR", "ADR", "NOR"], formula: "COR+ADR+NOR", name: "Respon Stres Komprehensif", type: "sinergis",
              description: "Sistem respon stres yang lengkap untuk menghadapi tantangan.",
              properties: ["Energi meningkat", "Kewaspadaan tinggi", "Kardiovaskular aktif", "Adaptasi optimal"] }
        ];

        // DOM Elements
        const periodicTableContainer = document.getElementById('periodic-table');
        const combinePeriodicTableContainer = document.getElementById('combine-periodic-table');
        const elementModal = document.getElementById('element-modal');
        const specialModal = document.getElementById('special-modal');
        const closeModalBtn = document.getElementById('close-modal');
        const closeSpecialModalBtn = document.getElementById('close-special-modal');
        const modalBody = document.getElementById('modal-body');
        const specialModalBody = document.getElementById('special-modal-body');
        const searchInput = document.getElementById('search-element');
        const totalElementsSpan = document.getElementById('total-elements');
        const showLanthanidesBtn = document.getElementById('show-lanthanides');
        const showActinidesBtn = document.getElementById('show-actinides');
        const selectedElementsContainer = document.getElementById('selected-elements');
        const emptySelectionMsg = document.getElementById('empty-selection');
        const combineBtn = document.getElementById('combine-btn');
        const clearBtn = document.getElementById('clear-btn');
        const combineResult = document.getElementById('combine-result');
        const statusMessage = document.getElementById('status-message');
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');

        // State untuk sistem penggabungan
        let selectedElements = [];
        let currentTab = 'table';

        // Inisialisasi Tabel Periodik
        function initPeriodicTable() {
            // Kosongkan kontainer
            periodicTableContainer.innerHTML = '';
            
            // Buat 7 baris (periode) x 18 kolom (golongan)
            for (let period = 1; period <= 7; period++) {
                for (let group = 1; group <= 18; group++) {
                    const element = findElementByPosition(period, group);
                    
                    const elementDiv = document.createElement('div');
                    elementDiv.className = `element-cell ${element ? element.colorClass : 'bg-transparent'}`;
                    
                    if (element) {
                        elementDiv.dataset.symbol = element.symbol;
                        elementDiv.dataset.number = element.number;
                        elementDiv.dataset.period = period;
                        elementDiv.dataset.group = group;
                        
                        elementDiv.innerHTML = `
                            <div class="element-number">${element.number}</div>
                            <div class="element-symbol">${element.symbol}</div>
                            <div class="element-name">${element.name}</div>
                        `;
                        
                        elementDiv.addEventListener('click', () => showElementDetails(element));
                    } else {
                        // Kosong, tapi bisa berisi placeholder untuk posisi khusus
                        if (period === 6 && group === 3) {
                            elementDiv.innerHTML = `<div class="text-xs text-gray-400">Steroid</div>`;
                            elementDiv.classList.add('bg-gray-100');
                            elementDiv.addEventListener('click', showLanthanides);
                        } else if (period === 7 && group === 3) {
                            elementDiv.innerHTML = `<div class="text-xs text-gray-400">Peptida</div>`;
                            elementDiv.classList.add('bg-gray-100');
                            elementDiv.addEventListener('click', showActinides);
                        } else {
                            elementDiv.style.visibility = 'hidden';
                        }
                    }
                    
                    periodicTableContainer.appendChild(elementDiv);
                }
            }
            
            // Inisialisasi tabel untuk mode gabungkan
            initCombinePeriodicTable();
            
            // Hitung total hormon yang ditampilkan
            const visibleElements = periodicElements.filter(e => 
                !['lipid-hormone'].includes(e.category) || 
                (e.symbol === 'PRO' || e.symbol === 'THR')
            ).length;
            
            totalElementsSpan.textContent = visibleElements;
            
            // Setup event listeners
            setupEventListeners();
        }

        // Inisialisasi tabel untuk mode gabungkan
        function initCombinePeriodicTable() {
            combinePeriodicTableContainer.innerHTML = '';
            
            // Buat grid 8x18 untuk mode gabungkan (lebih sederhana)
            const elementsForCombine = periodicElements.filter(e => 
                !['lipid-hormone'].includes(e.category) &&
                e.number <= 32 // Hanya sampai Renin untuk kesederhanaan
            );
            
            // Buat grid 6x10 untuk tampilan yang lebih rapi
            for (let i = 0; i < 60; i++) {
                const elementDiv = document.createElement('div');
                
                if (i < elementsForCombine.length) {
                    const element = elementsForCombine[i];
                    elementDiv.className = `element-cell ${element.colorClass}`;
                    elementDiv.dataset.symbol = element.symbol;
                    elementDiv.dataset.number = element.number;
                    
                    elementDiv.innerHTML = `
                        <div class="element-number">${element.number}</div>
                        <div class="element-symbol">${element.symbol}</div>
                    `;
                    
                    elementDiv.addEventListener('click', () => selectElementForCombination(element));
                } else {
                    elementDiv.style.visibility = 'hidden';
                }
                
                combinePeriodicTableContainer.appendChild(elementDiv);
            }
            
            // Set grid template untuk tampilan yang lebih baik
            combinePeriodicTableContainer.style.gridTemplateColumns = 'repeat(10, 1fr)';
        }

        // Cari elemen berdasarkan posisi (periode dan golongan)
        function findElementByPosition(period, group) {
            return periodicElements.find(element => 
                element.period === period && 
                element.group === group &&
                !['lipid-hormone'].includes(element.category)
            );
        }

        // Pilih elemen untuk kombinasi
        function selectElementForCombination(element) {
            // Cek apakah elemen sudah dipilih
            const existingIndex = selectedElements.findIndex(e => e.symbol === element.symbol);
            
            if (existingIndex !== -1) {
                // Hapus elemen jika sudah dipilih
                selectedElements.splice(existingIndex, 1);
            } else {
                // Tambahkan elemen jika belum dipilih (maksimal 3)
                if (selectedElements.length < 3) {
                    selectedElements.push(element);
                } else {
                    showStatusMessage("Maksimal 3 hormon yang dapat dianalisis", "error");
                    return;
                }
            }
            
            // Perbarui tampilan elemen yang dipilih
            updateSelectedElementsDisplay();
            
            // Perbarui status tombol gabungkan
            updateCombineButton();
            
            // Perbarui status message
            updateStatusMessage();
            
            // Highlight elemen di tabel
            highlightSelectedElements();
        }

        // Perbarui tampilan elemen yang dipilih
        function updateSelectedElementsDisplay() {
            selectedElementsContainer.innerHTML = '';
            
            if (selectedElements.length === 0) {
                emptySelectionMsg.style.display = 'block';
                return;
            }
            
            emptySelectionMsg.style.display = 'none';
            
            selectedElements.forEach((element, index) => {
                const badge = document.createElement('div');
                badge.className = 'selected-element-badge';
                badge.innerHTML = `
                    ${element.symbol} - ${element.name}
                    <button class="remove-btn" data-index="${index}">&times;</button>
                `;
                
                badge.querySelector('.remove-btn').addEventListener('click', (e) => {
                    e.stopPropagation();
                    selectedElements.splice(index, 1);
                    updateSelectedElementsDisplay();
                    updateCombineButton();
                    updateStatusMessage();
                    highlightSelectedElements();
                });
                
                selectedElementsContainer.appendChild(badge);
            });
        }

        // Highlight elemen yang dipilih di tabel
        function highlightSelectedElements() {
            // Reset semua elemen di tabel gabungkan
            document.querySelectorAll('#combine-periodic-table .element-cell').forEach(cell => {
                cell.classList.remove('selected');
            });
            
            // Highlight elemen yang dipilih
            selectedElements.forEach(element => {
                const cells = document.querySelectorAll(`#combine-periodic-table [data-symbol="${element.symbol}"]`);
                cells.forEach(cell => {
                    cell.classList.add('selected');
                });
            });
        }

        // Perbarui status tombol gabungkan
        function updateCombineButton() {
            if (selectedElements.length >= 2) {
                combineBtn.disabled = false;
                combineBtn.innerHTML = `<i class="fas fa-bolt mr-2"></i>Analisis (${selectedElements.length})`;
            } else {
                combineBtn.disabled = true;
                combineBtn.innerHTML = `<i class="fas fa-bolt mr-2"></i>Analisis Interaksi`;
            }
        }

        // Perbarui status message
        function updateStatusMessage() {
            if (selectedElements.length === 0) {
                statusMessage.textContent = "Pilih 2 atau 3 hormon untuk menganalisis interaksi";
            } else if (selectedElements.length === 1) {
                statusMessage.textContent = "Pilih 1 hormon lagi untuk analisis";
            } else if (selectedElements.length === 2) {
                statusMessage.textContent = "Klik 'Analisis' untuk melihat interaksi 2 hormon";
            } else if (selectedElements.length === 3) {
                statusMessage.textContent = "Klik 'Analisis' untuk melihat interaksi 3 hormon";
            }
        }

        // Tampilkan pesan status sementara
        function showStatusMessage(message, type = "info") {
            const originalMessage = statusMessage.textContent;
            statusMessage.textContent = message;
            statusMessage.style.color = type === "error" ? "#fecaca" : "rgba(255, 255, 255, 0.8)";
            
            setTimeout(() => {
                statusMessage.textContent = originalMessage;
                statusMessage.style.color = "rgba(255, 255, 255, 0.8)";
            }, 3000);
        }

        // Gabungkan elemen yang dipilih
        function combineElements() {
            if (selectedElements.length < 2) return;
            
            // Urutkan elemen berdasarkan nomor atom
            const sortedElements = [...selectedElements].sort((a, b) => a.number - b.number);
            const elementSymbols = sortedElements.map(e => e.symbol);
            
            // Cari interaksi yang diketahui
            let foundCompound = null;
            
            for (const compound of knownCompounds) {
                const compoundElements = [...compound.elements].sort();
                const selectedElementSymbols = [...elementSymbols].sort();
                
                if (JSON.stringify(compoundElements) === JSON.stringify(selectedElementSymbols)) {
                    foundCompound = compound;
                    break;
                }
            }
            
            // Jika tidak ditemukan, buat interaksi generik
            if (!foundCompound) {
                foundCompound = generateGenericInteraction(sortedElements);
            }
            
            // Tampilkan hasil
            displayCombineResult(foundCompound, sortedElements);
        }

        // Hasilkan interaksi generik berdasarkan hormon
        function generateGenericInteraction(elements) {
            const elementCount = elements.length;
            let formula = "";
            let name = "";
            let type = "";
            let description = "";
            let properties = [];
            
            // Buat formula berdasarkan jumlah hormon
            if (elementCount === 2) {
                const [h1, h2] = elements;
                formula = `${h1.symbol} + ${h2.symbol}`;
                name = `Interaksi ${h1.name} dan ${h2.name}`;
                type = getInteractionType(h1, h2);
                description = `Interaksi antara ${h1.name} dan ${h2.name} dalam regulasi fisiologis.`;
                properties = [
                    `Hormon 1: ${h1.symbol} (${h1.category})`,
                    `Hormon 2: ${h2.symbol} (${h2.category})`,
                    `Jenis interaksi: ${type}`,
                    `Efek utama: ${h1.valence} dan ${h2.valence}`
                ];
            } else if (elementCount === 3) {
                const [h1, h2, h3] = elements;
                formula = `${h1.symbol} + ${h2.symbol} + ${h3.symbol}`;
                name = `Interaksi Triple Hormon`;
                type = "kompleks";
                description = `Interaksi kompleks antara tiga hormon: ${h1.name}, ${h2.name}, dan ${h3.name}.`;
                properties = [
                    `Hormon 1: ${h1.symbol} (${h1.category})`,
                    `Hormon 2: ${h2.symbol} (${h2.category})`,
                    `Hormon 3: ${h3.symbol} (${h3.category})`,
                    `Efek sinergis: Regulasi homeostasis`
                ];
            }
            
            return {
                elements: elements.map(e => e.symbol),
                formula,
                name,
                type,
                description,
                properties
            };
        }

        // Tentukan jenis interaksi
        function getInteractionType(h1, h2) {
            const sameCategory = h1.category === h2.category;
            const bothSteroids = h1.category.includes('steroid') && h2.category.includes('steroid');
            const bothPeptides = h1.category.includes('peptide') && h2.category.includes('peptide');
            
            if (sameCategory) {
                if (bothSteroids) return "sinergis steroid";
                if (bothPeptides) return "regulasi peptida";
                return "sinergis";
            } else {
                if ((h1.valence.includes('meningkat') && h2.valence.includes('menurun')) ||
                    (h1.valence.includes('menurun') && h2.valence.includes('meningkat'))) {
                    return "antagonis";
                }
                return "komplementer";
            }
        }

        // Tampilkan hasil kombinasi
        function displayCombineResult(compound, elements) {
            combineResult.style.display = 'block';
            combineResult.innerHTML = `
                <div class="mb-4">
                    <h3 class="compound-name">${compound.name}</h3>
                    <div class="compound-formula">${compound.formula}</div>
                    <p class="compound-description">${compound.description}</p>
                    <div class="text-xs text-gray-500 mb-3">
                        <i class="fas fa-exchange-alt mr-1"></i> Jenis Interaksi: ${compound.type.toUpperCase()}
                    </div>
                </div>
                
                <div class="compound-properties">
                    ${compound.properties.map(prop => `
                        <div class="compound-prop">
                            <i class="fas fa-check text-green-500 mr-1"></i> ${prop}
                        </div>
                    `).join('')}
                </div>
                
                <div class="mt-4 p-3 bg-blue-50 rounded-lg">
                    <h4 class="font-bold text-gray-700 mb-2 text-sm">Mekanisme Interaksi:</h4>
                    <p class="text-xs text-gray-600">${getInteractionMechanism(compound, elements)}</p>
                </div>
                
                <div class="mt-4 text-xs text-gray-600">
                    <p><i class="fas fa-stethoscope text-teal-500 mr-1"></i> 
                    ${getClinicalImplication(compound, elements)}</p>
                </div>
                
                <button id="new-experiment" class="w-full mt-4 bg-teal-500 text-white py-2 rounded-lg font-bold">
                    <i class="fas fa-redo mr-2"></i>Analisis Baru
                </button>
            `;
            
            // Scroll ke hasil
            combineResult.scrollIntoView({ behavior: 'smooth' });
            
            // Event listener untuk tombol eksperimen baru
            document.getElementById('new-experiment').addEventListener('click', () => {
                selectedElements = [];
                updateSelectedElementsDisplay();
                updateCombineButton();
                updateStatusMessage();
                highlightSelectedElements();
                combineResult.style.display = 'none';
            });
        }

        // Dapatkan mekanisme interaksi
        function getInteractionMechanism(compound, elements) {
            if (compound.type.includes("antagonis")) {
                return "Hormon bekerja berlawanan untuk menjaga homeostasis melalui umpan balik negatif.";
            } else if (compound.type.includes("sinergis")) {
                return "Hormon bekerja sama memperkuat efek masing-masing untuk respon fisiologis yang optimal.";
            } else if (compound.type.includes("stimulasi")) {
                return "Hormon pertama merangsang produksi atau sekresi hormon kedua dalam aksis endokrin.";
            } else {
                return "Interaksi kompleks melalui reseptor spesifik, second messenger, dan modulasi ekspresi gen.";
            }
        }

        // Dapatkan implikasi klinis
        function getClinicalImplication(compound, elements) {
            const implications = [
                "Gangguan interaksi ini dapat menyebabkan penyakit endokrin seperti diabetes atau hipertiroidisme.",
                "Farmakologi memanfaatkan interaksi ini untuk terapi penggantian hormon.",
                "Pemahaman interaksi penting untuk diagnosis gangguan hormonal.",
                "Interaksi ini dimodulasi oleh faktor seperti stres, nutrisi, dan sirkadian."
            ];
            
            // Implikasi khusus berdasarkan hormon
            if (compound.elements.includes("INS") && compound.elements.includes("GLU")) {
                return "Gangguan keseimbangan insulin-glukagon adalah dasar patofisiologi diabetes mellitus.";
            } else if (compound.elements.includes("COR") && compound.elements.includes("ADR")) {
                return "Respon stres kronis dapat menyebabkan sindrom Cushing atau kelelahan adrenal.";
            } else if (compound.elements.includes("TSH") && compound.elements.includes("T4")) {
                return "Gangguan aksis TSH-T4 menyebabkan hipotiroidisme atau hipertiroidisme.";
            }
            
            return implications[Math.floor(Math.random() * implications.length)];
        }

        // Tampilkan detail elemen dalam modal
        function showElementDetails(element) {
            const categoryNames = {
                "peptide-hormone": "Hormon Peptida",
                "steroid-hormone": "Hormon Steroid",
                "amine-hormone": "Hormon Amina",
                "protein-hormone": "Hormon Protein",
                "glycoprotein-hormone": "Hormon Glikoprotein",
                "thyroid-hormone": "Hormon Tiroid",
                "gastrointestinal-hormone": "Hormon Pencernaan",
                "reproductive-hormone": "Hormon Reproduksi",
                "stress-hormone": "Hormon Stres",
                "growth-hormone": "Hormon Pertumbuhan",
                "lipid-hormone": "Hormon Lipid"
            };
            
            modalBody.innerHTML = `
                <div class="element-detail-card" style="border-left-color: ${getCategoryColor(element.category)}; background-color: ${getCategoryColor(element.category, 0.1)}">
                    <div class="flex items-center mb-4">
                        <div class="element-cell ${element.colorClass} w-16 h-16 mr-4">
                            <div class="element-number">${element.number}</div>
                            <div class="element-symbol text-xl">${element.symbol}</div>
                            <div class="element-name">${element.name}</div>
                        </div>
                        <div>
                            <h2 class="text-xl font-bold text-gray-800">${element.name}</h2>
                            <p class="text-gray-600 text-sm">${element.symbol} • ${categoryNames[element.category] || element.category}</p>
                        </div>
                    </div>
                    
                    <div class="space-y-2">
                        <div class="detail-row">
                            <span class="detail-label">Kode Hormon:</span>
                            <span class="detail-value">${element.number}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Berat Molekul:</span>
                            <span class="detail-value">${element.mass} kDa</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Kategori:</span>
                            <span class="detail-value">${categoryNames[element.category]}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Struktur:</span>
                            <span class="detail-value text-xs">${element.electronConfig}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Fungsi Utama:</span>
                            <span class="detail-value">${element.valence}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Kelenjar:</span>
                            <span class="detail-value">${getGlandLocation(element)}</span>
                        </div>
                    </div>
                    
                    <div class="mt-4 p-3 bg-gray-50 rounded-lg">
                        <h4 class="font-bold text-gray-700 mb-1 text-sm">Fakta Menarik:</h4>
                        <p class="text-xs text-gray-600">${getElementFact(element)}</p>
                    </div>
                    
                    ${currentTab === 'combine' ? `
                    <button id="select-for-combine" class="w-full mt-4 bg-teal-500 text-white py-2 rounded-lg font-bold">
                        <i class="fas fa-plus mr-2"></i>Pilih untuk Analisis Interaksi
                    </button>
                    ` : ''}
                </div>
            `;
            
            // Tambahkan event listener untuk tombol pilih jika di mode combine
            if (currentTab === 'combine') {
                const selectBtn = document.getElementById('select-for-combine');
                selectBtn.addEventListener('click', () => {
                    selectElementForCombination(element);
                    elementModal.classList.add('hidden');
                    
                    // Switch ke tab combine jika belum
                    if (currentTab !== 'combine') {
                        switchTab('combine');
                    }
                });
            }
            
            elementModal.classList.remove('hidden');
        }

        // Tampilkan hormon steroid
        function showLanthanides() {
            const steroids = periodicElements.filter(e => e.category.includes('steroid'));
            showSpecialElements(steroids, "Hormon Steroid");
        }

        // Tampilkan hormon peptida
        function showActinides() {
            const peptides = periodicElements.filter(e => e.category.includes('peptide'));
            showSpecialElements(peptides, "Hormon Peptida");
        }

        // Tampilkan elemen khusus (steroid/peptida)
        function showSpecialElements(elements, title) {
            specialModalBody.innerHTML = `
                <div class="mb-4">
                    <h2 class="text-xl font-bold text-gray-800 mb-2">${title}</h2>
                    <p class="text-gray-600 text-sm mb-4">Kelompok hormon berdasarkan struktur kimia</p>
                </div>
                <div class="grid grid-cols-4 gap-2 mb-4">
                    ${elements.map(element => `
                        <div class="element-cell ${element.colorClass} w-full" onclick="showElementDetailsFromModal(${element.number})">
                            <div class="element-number">${element.number}</div>
                            <div class="element-symbol">${element.symbol}</div>
                            <div class="element-name">${element.name}</div>
                        </div>
                    `).join('')}
                </div>
                <div class="text-xs text-gray-500">
                    <p>• ${title === "Hormon Steroid" ? "Derivat kolesterol, lipofilik, kerja melalui inti sel" : "Rantai asam amino, hidrofilik, kerja melalui reseptor membran"}</p>
                    <p>• ${title === "Hormon Steroid" ? "Contoh: seks steroid, kortikosteroid" : "Contoh: insulin, glukagon, oksitosin"}</p>
                </div>
            `;
            
            specialModal.classList.remove('hidden');
        }

        // Helper untuk showElementDetails dari modal khusus
        window.showElementDetailsFromModal = function(number) {
            const element = periodicElements.find(e => e.number === number);
            if (element) {
                specialModal.classList.add('hidden');
                showElementDetails(element);
            }
        };

        // Fungsi untuk berpindah tab
        function switchTab(tabName) {
            // Update tab aktif
            tabs.forEach(tab => {
                if (tab.dataset.tab === tabName) {
                    tab.classList.add('active');
                } else {
                    tab.classList.remove('active');
                }
            });
            
            // Update konten tab aktif
            tabContents.forEach(content => {
                if (content.id === `${tabName}-tab`) {
                    content.classList.add('active');
                } else {
                    content.classList.remove('active');
                }
            });
            
            currentTab = tabName;
            
            // Scroll ke atas
            window.scrollTo(0, 0);
        }

        // Dapatkan warna berdasarkan kategori
        function getCategoryColor(category, opacity = 1) {
            const colors = {
                "peptide-hormone": "#ff6b6b",
                "steroid-hormone": "#ffa726",
                "amine-hormone": "#42a5f5",
                "protein-hormone": "#66bb6a",
                "glycoprotein-hormone": "#ab47bc",
                "thyroid-hormone": "#26c6da",
                "gastrointestinal-hormone": "#ffca28",
                "reproductive-hormone": "#ec407a",
                "stress-hormone": "#7e57c2",
                "growth-hormone": "#5c6bc0",
                "lipid-hormone": "#8d6e63"
            };
            
            const color = colors[category] || "#cccccc";
            if (opacity < 1) {
                const r = parseInt(color.slice(1, 3), 16);
                const g = parseInt(color.slice(3, 5), 16);
                const b = parseInt(color.slice(5, 7), 16);
                return `rgba(${r}, ${g}, ${b}, ${opacity})`;
            }
            return color;
        }

        // Dapatkan lokasi kelenjar
        function getGlandLocation(element) {
            const glands = {
                "GH": "Hipofisis anterior",
                "TSH": "Hipofisis anterior",
                "ACTH": "Hipofisis anterior",
                "PRL": "Hipofisis anterior",
                "FSH": "Hipofisis anterior",
                "LH": "Hipofisis anterior",
                "ADH": "Hipofisis posterior",
                "OXT": "Hipofisis posterior",
                "T4": "Tiroid",
                "T3": "Tiroid",
                "CT": "Tiroid",
                "PTH": "Paratiroid",
                "ALD": "Adrenal korteks",
                "COR": "Adrenal korteks",
                "ADR": "Adrenal medula",
                "NOR": "Adrenal medula",
                "INS": "Pankreas",
                "GLU": "Pankreas",
                "SST": "Pankreas",
                "PP": "Pankreas",
                "EST": "Ovarium",
                "PRO": "Ovarium/korpus luteum",
                "TES": "Testis",
                "HCG": "Plasenta"
            };
            
            return glands[element.symbol] || "Berbagai jaringan";
        }

        // Dapatkan fakta menarik tentang hormon
        function getElementFact(element) {
            const facts = {
                "INS": "Insulin ditemukan tahun 1921 oleh Banting dan Best, menyelamatkan jutaan penderita diabetes.",
                "ADR": "Adrenalin menyebabkan 'rush' adrenalin dalam 2-3 detik, meningkatkan kekuatan hingga 30%.",
                "GH": "Growth hormone diproduksi terutama saat tidur nyenyak, terutama pada anak-anak.",
                "MEL": "Melatonin mengatur siklus tidur-bangun, produksi tertinggi pada malam hari.",
                "OXT": "Oksitosin disebut 'hormon cinta', meningkat saat berpelukan dan melahirkan.",
                "TES": "Testosteron pria 7-8x lebih tinggi daripada wanita, memuncak usia 20-30 tahun.",
                "EST": "Estrogen wanita 3x lebih tinggi daripada pria, berfluktuasi selama siklus menstruasi.",
                "COR": "Kortisol memiliki ritme diurnal, tertinggi pagi hari untuk energi, terendah malam hari."
            };
            
            return facts[element.symbol] || `${element.name} bekerja dalam konsentrasi nanomolar hingga pikomolar.`;
        }

        // Setup event listeners
        function setupEventListeners() {
            // Tutup modal
            closeModalBtn.addEventListener('click', () => {
                elementModal.classList.add('hidden');
            });
            
            closeSpecialModalBtn.addEventListener('click', () => {
                specialModal.classList.add('hidden');
            });
            
            // Tutup modal dengan klik di luar konten
            elementModal.addEventListener('click', (e) => {
                if (e.target === elementModal) {
                    elementModal.classList.add('hidden');
                }
            });
            
            specialModal.addEventListener('click', (e) => {
                if (e.target === specialModal) {
                    specialModal.classList.add('hidden');
                }
            });
            
            // Tutup modal dengan tombol ESC
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    if (!elementModal.classList.contains('hidden')) {
                        elementModal.classList.add('hidden');
                    }
                    if (!specialModal.classList.contains('hidden')) {
                        specialModal.classList.add('hidden');
                    }
                }
            });
            
            // Pencarian elemen
            searchInput.addEventListener('input', (e) => {
                const searchTerm = e.target.value.toLowerCase().trim();
                
                // Sembunyikan semua elemen dulu
                document.querySelectorAll('.element-cell').forEach(cell => {
                    if (cell.dataset.symbol) {
                        cell.style.opacity = '0.3';
                        cell.style.transform = 'scale(0.95)';
                    }
                });
                
                // Jika kosong, tampilkan semua
                if (!searchTerm) {
                    document.querySelectorAll('.element-cell').forEach(cell => {
                        if (cell.dataset.symbol) {
                            cell.style.opacity = '1';
                            cell.style.transform = 'scale(1)';
                        }
                    });
                    return;
                }
                
                // Tampilkan elemen yang cocok
                let found = false;
                periodicElements.forEach(element => {
                    if (element.symbol.toLowerCase().includes(searchTerm) || 
                        element.name.toLowerCase().includes(searchTerm) ||
                        element.number.toString().includes(searchTerm)) {
                        
                        const cells = document.querySelectorAll(`[data-symbol="${element.symbol}"]`);
                        cells.forEach(cell => {
                            cell.style.opacity = '1';
                            cell.style.transform = 'scale(1.05)';
                            cell.style.zIndex = '10';
                            cell.style.boxShadow = '0 0 8px rgba(0,0,0,0.2)';
                        });
                        found = true;
                    }
                });
                
                // Jika tidak ditemukan, reset semua
                if (!found) {
                    document.querySelectorAll('.element-cell').forEach(cell => {
                        if (cell.dataset.symbol) {
                            cell.style.opacity = '1';
                            cell.style.transform = 'scale(1)';
                            cell.style.zIndex = '1';
                            cell.style.boxShadow = '';
                        }
                    });
                }
            });
            
            // Fokus pada input pencarian dengan shortcut Ctrl+F
            document.addEventListener('keydown', (e) => {
                if ((e.ctrlKey || e.metaKey) && e.key === 'f') {
                    e.preventDefault();
                    searchInput.focus();
                }
            });
            
            // Tombol untuk lantanida dan aktinida
            showLanthanidesBtn.addEventListener('click', showLanthanides);
            showActinidesBtn.addEventListener('click', showActinides);
            
            // Tombol untuk sistem penggabungan
            combineBtn.addEventListener('click', combineElements);
            
            clearBtn.addEventListener('click', () => {
                selectedElements = [];
                updateSelectedElementsDisplay();
                updateCombineButton();
                updateStatusMessage();
                highlightSelectedElements();
                combineResult.style.display = 'none';
                showStatusMessage("Semua hormon telah dihapus", "info");
            });
            
            // Tab switching
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    switchTab(tab.dataset.tab);
                });
            });
        }

        // Inisialisasi ketika halaman dimuat
        document.addEventListener('DOMContentLoaded', initPeriodicTable);
    </script>
</body>
</html>
