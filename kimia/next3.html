<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Tabel Periodik - TETA SAINS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #38b2ac;
            --secondary: #0e7490;
            --accent: #f59e0b;
            --physics: #3b82f6;
            --chemistry: #10b981;
            --biology: #8b5cf6;
            --astronomy: #ec4899;
        }
        
        body {
            font-family: 'Baloo 2', cursive;
            background-color: #f8fafc;
        }
        
        .app-container {
            max-width: 414px;
            margin: 0 auto;
            background: white;
            min-height: 100vh;
            position: relative;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        
        /* NAVBAR - TIDAK DIUBAH */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            width: 100%;
            max-width: 414px;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
            background: white;
            z-index: 10;
            height: 70px;
            display: flex;
            align-items: center;
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #6b7280;
            text-decoration: none;
            flex: 1;
            height: 100%;
            padding: 0.5rem 0;
            transition: all 0.3s ease;
        }
        
        .nav-item span {
            font-size: 0.75rem;
            margin-top: 0.25rem;
        }
        
        .nav-item.active {
            color: var(--primary);
        }
        
        .nav-icon {
            transition: all 0.3s ease;
            font-size: 1.25rem;
        }
        
        .nav-icon.active {
            transform: translateY(-5px);
            color: var(--primary);
        }
        
        /* GAME STYLES */
        .element-card {
            width: 50px;
            height: 50px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            font-weight: bold;
            cursor: grab;
            transition: all 0.2s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }
        
        .element-card.dragging {
            opacity: 0.7;
            transform: scale(1.05);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .element-symbol {
            font-size: 1.2rem;
            font-weight: 800;
        }
        
        .element-number {
            font-size: 0.7rem;
            position: absolute;
            top: 2px;
            left: 4px;
        }
        
        .element-name {
            font-size: 0.6rem;
            margin-top: 2px;
        }
        
        .slot {
            width: 54px;
            height: 54px;
            border: 2px dashed #cbd5e1;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f8fafc;
            transition: all 0.3s;
        }
        
        .slot.correct {
            border-color: #10b981;
            background-color: rgba(16, 185, 129, 0.1);
        }
        
        .slot.incorrect {
            border-color: #ef4444;
            background-color: rgba(239, 68, 68, 0.1);
        }
        
        .slot.hover {
            border-color: #3b82f6;
            background-color: rgba(59, 130, 246, 0.1);
        }
        
        .slot.filled {
            border-style: solid;
        }
        
        .color-alkali { background-color: #FF6961; }
        .color-alkaline-earth { background-color: #FFB347; }
        .color-transition { background-color: #77DD77; }
        .color-basic-metal { background-color: #AEC6CF; }
        .color-metalloid { background-color: #FDFD96; }
        .color-nonmetal { background-color: #84B6F4; }
        .color-halogen { background-color: #FFB7C5; }
        .color-noble-gas { background-color: #E6E6FA; }
        .color-lanthanide { background-color: #C9A0DC; }
        .color-actinide { background-color: #F49AC2; }
        
        .timer {
            font-size: 2rem;
            font-weight: bold;
            text-align: center;
            color: #3b82f6;
        }
        
        .score-display {
            font-size: 1.5rem;
            font-weight: bold;
            text-align: center;
            color: #10b981;
        }
        
        .pulse {
            animation: pulse 0.5s infinite alternate;
        }
        
        @keyframes pulse {
            from { transform: scale(1); }
            to { transform: scale(1.05); }
        }
        
        .bounce {
            animation: bounce 0.5s;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #f59e0b;
            border-radius: 50%;
            opacity: 0.7;
            animation: confetti-fall 2s linear forwards;
        }
        
        @keyframes confetti-fall {
            0% {
                transform: translateY(-100px) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(500px) rotate(360deg);
                opacity: 0;
            }
        }
        
        .game-complete {
            animation: complete-glow 2s infinite alternate;
        }
        
        @keyframes complete-glow {
            from { box-shadow: 0 0 10px rgba(16, 185, 129, 0.5); }
            to { box-shadow: 0 0 20px rgba(16, 185, 129, 0.8); }
        }
    </style>
</head>
<body>
    <!-- Mobile App Container -->
    <div class="app-container">
        <!-- App Header -->
        <header class="bg-gradient-to-r from-primary to-secondary p-4 text-white">
            <div class="flex justify-between items-center">
                <div class="app-logo">
                    <div class="app-logo-icon" style="background: #9999ff; color: white;">
                        <i class="fas fa-atom"></i>
                    </div>
                    <h1 class="app-name" style="color: #9999ff;">TETA SAINS</h1>
                </div>
                <div class="flex items-center space-x-3">
                    <a href="dashboad siswa.html" class="text-white">
                        <i class="fas fa-home"></i>
                    </a>
                </div>
            </div>
        </header>
        
        <!-- Main Content Area -->
        <main class="pb-20">
            <!-- Game Header -->
            <section class="p-4">
                <div class="bg-white rounded-xl shadow-md p-4 mb-4 border-l-4" style="border-color: #10b981;">
                    <div class="flex justify-between items-center mb-2">
                        <h1 class="text-xl font-bold text-gray-800">
                            <i class="fas fa-gamepad text-green-500 mr-2"></i>
                            Game Tabel Periodik
                        </h1>
                        <span class="text-xs bg-green-500 text-white px-2 py-1 rounded-full">
                            Level: <span id="currentLevel">1</span>/5
                        </span>
                    </div>
                    <p class="text-sm text-gray-600">
                        Susun unsur-unsur kimia pada posisi yang benar di tabel periodik!
                    </p>
                </div>
            </section>
            
            <!-- Game Stats -->
            <section class="px-4">
                <div class="grid grid-cols-3 gap-3 mb-4">
                    <div class="bg-blue-50 rounded-lg p-3 text-center border border-blue-200">
                        <div class="timer" id="timer">02:00</div>
                        <div class="text-xs text-blue-600">Waktu</div>
                    </div>
                    <div class="bg-green-50 rounded-lg p-3 text-center border border-green-200">
                        <div class="score-display" id="score">0</div>
                        <div class="text-xs text-green-600">Skor</div>
                    </div>
                    <div class="bg-purple-50 rounded-lg p-3 text-center border border-purple-200">
                        <div id="correctCount" class="text-2xl font-bold text-purple-600">0</div>
                        <div class="text-xs text-purple-600">Tepat</div>
                    </div>
                </div>
            </section>
            
            <!-- Game Area -->
            <section class="p-4">
                <!-- Unsur yang harus disusun -->
                <div class="bg-yellow-50 rounded-xl p-4 mb-4 border border-yellow-200">
                    <h3 class="font-bold text-gray-800 mb-2 flex items-center">
                        <i class="fas fa-hand-point-right text-yellow-500 mr-2"></i>
                        Unsur yang Harus Disusun:
                    </h3>
                    <div class="flex flex-wrap gap-2" id="elementsContainer">
                        <!-- Elements will be generated here -->
                    </div>
                </div>
                
                <!-- Tabel Periodik -->
                <div class="bg-white rounded-xl shadow-lg p-4 border border-gray-200">
                    <h3 class="font-bold text-gray-800 mb-3 text-center">
                        <i class="fas fa-table text-blue-500 mr-2"></i>
                        Tabel Periodik
                    </h3>
                    
                    <div class="overflow-x-auto">
                        <div id="periodicTable" class="inline-block mx-auto">
                            <!-- Periodic table slots will be generated here -->
                        </div>
                    </div>
                    
                    <!-- Legend -->
                    <div class="mt-4 pt-3 border-t border-gray-200">
                        <h4 class="text-sm font-bold text-gray-700 mb-2">Keterangan Golongan:</h4>
                        <div class="grid grid-cols-3 gap-2 text-xs">
                            <div class="flex items-center">
                                <div class="w-3 h-3 rounded-sm color-alkali mr-1"></div>
                                <span>Alkali</span>
                            </div>
                            <div class="flex items-center">
                                <div class="w-3 h-3 rounded-sm color-alkaline-earth mr-1"></div>
                                <span>Alkali Tanah</span>
                            </div>
                            <div class="flex items-center">
                                <div class="w-3 h-3 rounded-sm color-transition mr-1"></div>
                                <span>Transisi</span>
                            </div>
                            <div class="flex items-center">
                                <div class="w-3 h-3 rounded-sm color-nonmetal mr-1"></div>
                                <span>Non-Logam</span>
                            </div>
                            <div class="flex items-center">
                                <div class="w-3 h-3 rounded-sm color-halogen mr-1"></div>
                                <span>Halogen</span>
                            </div>
                            <div class="flex items-center">
                                <div class="w-3 h-3 rounded-sm color-noble-gas mr-1"></div>
                                <span>Gas Mulia</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Game Controls -->
                <div class="mt-4 grid grid-cols-2 gap-3">
                    <button id="checkButton" 
                            class="py-3 bg-green-500 text-white rounded-lg font-bold flex items-center justify-center hover:bg-green-600 transition">
                        <i class="fas fa-check-circle mr-2"></i> Periksa Jawaban
                    </button>
                    <button id="hintButton" 
                            class="py-3 bg-blue-500 text-white rounded-lg font-bold flex items-center justify-center hover:bg-blue-600 transition">
                        <i class="fas fa-lightbulb mr-2"></i> Petunjuk (3)
                    </button>
                    <button id="nextLevelButton" 
                            class="py-3 bg-purple-500 text-white rounded-lg font-bold flex items-center justify-center hover:bg-purple-600 transition">
                        <i class="fas fa-forward mr-2"></i> Level Berikutnya
                    </button>
                    <button id="resetButton" 
                            class="py-3 bg-red-500 text-white rounded-lg font-bold flex items-center justify-center hover:bg-red-600 transition">
                        <i class="fas fa-redo mr-2"></i> Ulangi Level
                    </button>
                </div>
            </section>
            
            <!-- Instructions -->
            <section class="p-4 pt-0">
                <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                    <h3 class="font-bold text-gray-800 mb-2 flex items-center">
                        <i class="fas fa-info-circle text-blue-500 mr-2"></i>
                        Cara Bermain:
                    </h3>
                    <ul class="text-sm text-gray-600 space-y-1">
                        <li>1. Drag & drop unsur ke kotak tabel periodik</li>
                        <li>2. Susun berdasarkan nomor atom dan golongan</li>
                        <li>3. Warna unsur sesuai dengan golongannya</li>
                        <li>4. Tekan "Periksa Jawaban" untuk mengecek</li>
                        <li>5. Selesaikan dalam waktu yang ditentukan!</li>
                    </ul>
                </div>
            </section>
        </main>
        
        <!-- BOTTOM NAVIGATION - TIDAK DIUBAH -->
        <nav class="bottom-nav">
            <a href="dashboad siswa.html" class="nav-item">
                <i class="fas fa-home nav-icon"></i>
                <span>Beranda</span>
            </a>
            <a href="soal harian/dashboard soal.html" class="nav-item">
                <i class="fas fa-flask nav-icon"></i>
                <span>Soal Harian</span>
            </a>
            <a href="ai/nayra.html" class="nav-item">
                <i class="fas fa-robot nav-icon"></i>
                <span>Nayra AI</span>
            </a>
            <a href="materi harian/kategori materi.html" class="nav-item">
                <i class="fas fa-chalkboard-teacher nav-icon"></i>
                <span>Materi Harian</span>
            </a>
            <a href="profil/profil.html" class="nav-item">
                <i class="fas fa-user nav-icon"></i>
                <span>Profil</span>
            </a>
        </nav>
    </div>

    <script>
        // Data unsur kimia untuk 5 level
        const gameLevels = [
            {
                level: 1,
                time: 120, // 2 menit
                elements: [
                    { symbol: "H", name: "Hidrogen", number: 1, group: "nonmetal", row: 1, col: 1 },
                    { symbol: "He", name: "Helium", number: 2, group: "noble-gas", row: 1, col: 18 },
                    { symbol: "Li", name: "Litium", number: 3, group: "alkali", row: 2, col: 1 },
                    { symbol: "Na", name: "Natrium", number: 11, group: "alkali", row: 3, col: 1 },
                    { symbol: "O", name: "Oksigen", number: 8, group: "nonmetal", row: 2, col: 16 }
                ]
            },
            {
                level: 2,
                time: 150,
                elements: [
                    { symbol: "C", name: "Karbon", number: 6, group: "nonmetal", row: 2, col: 14 },
                    { symbol: "N", name: "Nitrogen", number: 7, group: "nonmetal", row: 2, col: 15 },
                    { symbol: "F", name: "Fluor", number: 9, group: "halogen", row: 2, col: 17 },
                    { symbol: "Ne", name: "Neon", number: 10, group: "noble-gas", row: 2, col: 18 },
                    { symbol: "Mg", name: "Magnesium", number: 12, group: "alkaline-earth", row: 3, col: 2 }
                ]
            },
            {
                level: 3,
                time: 180,
                elements: [
                    { symbol: "Al", name: "Aluminium", number: 13, group: "basic-metal", row: 3, col: 13 },
                    { symbol: "Si", name: "Silikon", number: 14, group: "metalloid", row: 3, col: 14 },
                    { symbol: "P", name: "Fosfor", number: 15, group: "nonmetal", row: 3, col: 15 },
                    { symbol: "S", name: "Belerang", number: 16, group: "nonmetal", row: 3, col: 16 },
                    { symbol: "Cl", name: "Klor", number: 17, group: "halogen", row: 3, col: 17 },
                    { symbol: "Ar", name: "Argon", number: 18, group: "noble-gas", row: 3, col: 18 }
                ]
            },
            {
                level: 4,
                time: 210,
                elements: [
                    { symbol: "K", name: "Kalium", number: 19, group: "alkali", row: 4, col: 1 },
                    { symbol: "Ca", name: "Kalsium", number: 20, group: "alkaline-earth", row: 4, col: 2 },
                    { symbol: "Fe", name: "Besi", number: 26, group: "transition", row: 4, col: 8 },
                    { symbol: "Cu", name: "Tembaga", number: 29, group: "transition", row: 4, col: 11 },
                    { symbol: "Zn", name: "Seng", number: 30, group: "transition", row: 4, col: 12 },
                    { symbol: "Br", name: "Brom", number: 35, group: "halogen", row: 4, col: 17 }
                ]
            },
            {
                level: 5,
                time: 240,
                elements: [
                    { symbol: "Ag", name: "Perak", number: 47, group: "transition", row: 5, col: 11 },
                    { symbol: "I", name: "Iodium", number: 53, group: "halogen", row: 5, col: 17 },
                    { symbol: "Xe", name: "Xenon", number: 54, group: "noble-gas", row: 5, col: 18 },
                    { symbol: "Au", name: "Emas", number: 79, group: "transition", row: 6, col: 11 },
                    { symbol: "Hg", name: "Raksa", number: 80, group: "transition", row: 6, col: 12 },
                    { symbol: "Pb", name: "Timbal", number: 82, group: "basic-metal", row: 6, col: 14 },
                    { symbol: "U", name: "Uranium", number: 92, group: "actinide", row: 7, col: 6 }
                ]
            }
        ];

        // Game state
        let currentLevel = 0;
        let score = 0;
        let timeLeft = 0;
        let timerInterval = null;
        let correctCount = 0;
        let hintsLeft = 3;
        let placedElements = new Map(); // Map slotId -> element
        let elementPositions = new Map(); // Map elementId -> {row, col}

        // DOM Elements
        const elementsContainer = document.getElementById('elementsContainer');
        const periodicTable = document.getElementById('periodicTable');
        const timerElement = document.getElementById('timer');
        const scoreElement = document.getElementById('score');
        const correctCountElement = document.getElementById('correctCount');
        const currentLevelElement = document.getElementById('currentLevel');
        const checkButton = document.getElementById('checkButton');
        const hintButton = document.getElementById('hintButton');
        const nextLevelButton = document.getElementById('nextLevelButton');
        const resetButton = document.getElementById('resetButton');

        // Initialize game
        function initGame() {
            loadLevel(currentLevel);
            setupEventListeners();
            startTimer();
        }

        // Load a level
        function loadLevel(levelIndex) {
            const level = gameLevels[levelIndex];
            
            // Update UI
            currentLevelElement.textContent = level.level;
            timeLeft = level.time;
            updateTimerDisplay();
            hintsLeft = 3;
            updateHintButton();
            placedElements.clear();
            elementPositions.clear();
            
            // Clear containers
            elementsContainer.innerHTML = '';
            periodicTable.innerHTML = '';
            
            // Create element cards
            level.elements.forEach((element, index) => {
                const elementDiv = document.createElement('div');
                elementDiv.className = `element-card color-${element.group}`;
                elementDiv.id = `element-${element.symbol}`;
                elementDiv.draggable = true;
                elementDiv.dataset.elementId = element.symbol;
                elementDiv.dataset.number = element.number;
                elementDiv.dataset.group = element.group;
                elementDiv.dataset.correctRow = element.row;
                elementDiv.dataset.correctCol = element.col;
                
                elementDiv.innerHTML = `
                    <div class="element-number">${element.number}</div>
                    <div class="element-symbol">${element.symbol}</div>
                    <div class="element-name">${element.name}</div>
                `;
                
                elementsContainer.appendChild(elementDiv);
            });
            
            // Create periodic table slots
            // 7 baris x 18 kolom
            for (let row = 1; row <= 7; row++) {
                const rowDiv = document.createElement('div');
                rowDiv.className = 'flex justify-center mb-1';
                
                for (let col = 1; col <= 18; col++) {
                    const slotDiv = document.createElement('div');
                    slotDiv.className = 'slot';
                    slotDiv.id = `slot-${row}-${col}`;
                    slotDiv.dataset.row = row;
                    slotDiv.dataset.col = col;
                    
                    // Add label for first row and column
                    if (row === 1 && col === 1) {
                        const label = document.createElement('div');
                        label.className = 'text-xs text-gray-500 absolute -top-4';
                        label.textContent = 'Baris/Kolom';
                        slotDiv.appendChild(label);
                    }
                    
                    rowDiv.appendChild(slotDiv);
                }
                
                periodicTable.appendChild(rowDiv);
            }
            
            // Add row and column labels
            for (let i = 1; i <= 7; i++) {
                const label = document.createElement('div');
                label.className = 'text-xs text-gray-600 text-center mr-1';
                label.textContent = i;
                label.style.alignSelf = 'center';
                periodicTable.children[i-1].insertBefore(label, periodicTable.children[i-1].firstChild);
            }
            
            // Setup drag and drop
            setupDragAndDrop();
        }

        // Setup drag and drop
        function setupDragAndDrop() {
            const elements = document.querySelectorAll('.element-card');
            const slots = document.querySelectorAll('.slot');
            
            elements.forEach(element => {
                element.addEventListener('dragstart', handleDragStart);
                element.addEventListener('dragend', handleDragEnd);
            });
            
            slots.forEach(slot => {
                slot.addEventListener('dragover', handleDragOver);
                slot.addEventListener('dragenter', handleDragEnter);
                slot.addEventListener('dragleave', handleDragLeave);
                slot.addEventListener('drop', handleDrop);
            });
        }

        function handleDragStart(e) {
            e.dataTransfer.setData('text/plain', e.target.dataset.elementId);
            e.target.classList.add('dragging');
            
            // Add ghost image
            setTimeout(() => {
                e.target.classList.add('opacity-30');
            }, 0);
        }

        function handleDragEnd(e) {
            e.target.classList.remove('dragging');
            e.target.classList.remove('opacity-30');
        }

        function handleDragOver(e) {
            e.preventDefault();
        }

        function handleDragEnter(e) {
            e.preventDefault();
            e.target.classList.add('hover');
        }

        function handleDragLeave(e) {
            e.target.classList.remove('hover');
        }

        function handleDrop(e) {
            e.preventDefault();
            e.target.classList.remove('hover');
            
            const elementId = e.dataTransfer.getData('text/plain');
            const element = document.getElementById(`element-${elementId}`);
            const slot = e.target;
            
            // Remove element from previous slot if exists
            if (elementPositions.has(elementId)) {
                const oldPos = elementPositions.get(elementId);
                const oldSlot = document.getElementById(`slot-${oldPos.row}-${oldPos.col}`);
                oldSlot.innerHTML = '';
                oldSlot.classList.remove('filled');
            }
            
            // Place element in new slot
            slot.innerHTML = '';
            const elementClone = element.cloneNode(true);
            elementClone.classList.remove('dragging');
            elementClone.classList.remove('opacity-30');
            elementClone.draggable = false;
            elementClone.classList.add('cursor-default');
            
            slot.appendChild(elementClone);
            slot.classList.add('filled');
            
            // Store placement
            placedElements.set(slot.id, elementId);
            elementPositions.set(elementId, {
                row: parseInt(slot.dataset.row),
                col: parseInt(slot.dataset.col)
            });
            
            // Visual feedback
            slot.classList.add('bounce');
            setTimeout(() => {
                slot.classList.remove('bounce');
            }, 500);
        }

        // Check answers
        function checkAnswers() {
            let correct = 0;
            const levelElements = gameLevels[currentLevel].elements;
            
            // Reset all slots styling
            document.querySelectorAll('.slot').forEach(slot => {
                slot.classList.remove('correct', 'incorrect');
            });
            
            // Check each placed element
            placedElements.forEach((elementId, slotId) => {
                const element = levelElements.find(e => e.symbol === elementId);
                const [_, row, col] = slotId.split('-');
                const slot = document.getElementById(slotId);
                
                if (element && 
                    parseInt(row) === element.row && 
                    parseInt(col) === element.col) {
                    // Correct placement
                    slot.classList.add('correct');
                    correct++;
                } else {
                    // Incorrect placement
                    slot.classList.add('incorrect');
                }
            });
            
            // Update correct count
            correctCount = correct;
            correctCountElement.textContent = correctCount;
            correctCountElement.classList.add('pulse');
            setTimeout(() => {
                correctCountElement.classList.remove('pulse');
            }, 500);
            
            // Update score
            if (correct === levelElements.length) {
                // All correct!
                const levelScore = timeLeft * 10 + (hintsLeft * 5);
                score += levelScore;
                scoreElement.textContent = score;
                scoreElement.classList.add('bounce');
                
                // Show celebration
                showCelebration();
                
                // Enable next level button
                nextLevelButton.disabled = false;
                nextLevelButton.classList.remove('opacity-50');
                
                // Stop timer
                clearInterval(timerInterval);
                
                // Show success message
                setTimeout(() => {
                    alert(`üéâ Level ${currentLevel + 1} selesai!\nSkor: +${levelScore}\nWaktu tersisa: ${timeLeft} detik`);
                }, 500);
            } else {
                // Some incorrect
                setTimeout(() => {
                    alert(`‚ö†Ô∏è ${correct} dari ${levelElements.length} unsur tepat.\nCoba perbaiki penempatannya!`);
                }, 300);
            }
        }

        // Provide hint
        function provideHint() {
            if (hintsLeft <= 0) return;
            
            const levelElements = gameLevels[currentLevel].elements;
            const unplacedElements = levelElements.filter(element => {
                return !Array.from(placedElements.values()).includes(element.symbol);
            });
            
            if (unplacedElements.length === 0) return;
            
            const randomElement = unplacedElements[Math.floor(Math.random() * unplacedElements.length)];
            const elementCard = document.getElementById(`element-${randomElement.symbol}`);
            
            // Highlight the element card
            elementCard.classList.add('pulse');
            elementCard.style.boxShadow = '0 0 10px #3b82f6';
            
            // Show hint message
            alert(`üí° Petunjuk: ${randomElement.name} (${randomElement.symbol})\nNomor atom: ${randomElement.number}\nGolongan: ${getGroupName(randomElement.group)}`);
            
            // Reduce hints
            hintsLeft--;
            updateHintButton();
            
            // Remove highlight after 2 seconds
            setTimeout(() => {
                elementCard.classList.remove('pulse');
                elementCard.style.boxShadow = '';
            }, 2000);
        }

        function getGroupName(groupKey) {
            const groupNames = {
                'alkali': 'Alkali',
                'alkaline-earth': 'Alkali Tanah',
                'transition': 'Logam Transisi',
                'basic-metal': 'Logam Dasar',
                'metalloid': 'Metaloid',
                'nonmetal': 'Non-Logam',
                'halogen': 'Halogen',
                'noble-gas': 'Gas Mulia',
                'lanthanide': 'Lantanida',
                'actinide': 'Aktinida'
            };
            return groupNames[groupKey] || groupKey;
        }

        function updateHintButton() {
            hintButton.innerHTML = `<i class="fas fa-lightbulb mr-2"></i> Petunjuk (${hintsLeft})`;
            hintButton.disabled = hintsLeft <= 0;
            if (hintsLeft <= 0) {
                hintButton.classList.add('opacity-50');
            } else {
                hintButton.classList.remove('opacity-50');
            }
        }

        // Next level
        function nextLevel() {
            if (currentLevel < gameLevels.length - 1) {
                currentLevel++;
                loadLevel(currentLevel);
                startTimer();
                nextLevelButton.disabled = true;
                nextLevelButton.classList.add('opacity-50');
            } else {
                // Game completed
                alert(`üéä Selamat! Anda menyelesaikan semua level!\nSkor akhir: ${score}\nKembali ke menu utama.`);
                window.location.href = "dashboad siswa.html";
            }
        }

        // Reset current level
        function resetLevel() {
            if (confirm('Apakah Anda yakin ingin mengulang level ini?')) {
                loadLevel(currentLevel);
                startTimer();
                correctCount = 0;
                correctCountElement.textContent = '0';
            }
        }

        // Timer functions
        function startTimer() {
            clearInterval(timerInterval);
            
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    timeUp();
                } else if (timeLeft <= 30) {
                    // Last 30 seconds warning
                    timerElement.style.color = '#ef4444';
                    timerElement.classList.add('pulse');
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function timeUp() {
            alert('‚è∞ Waktu habis! Level belum selesai.');
            resetLevel();
        }

        // Celebration effects
        function showCelebration() {
            // Create confetti
            for (let i = 0; i < 50; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = `${Math.random() * 100}%`;
                confetti.style.backgroundColor = getRandomColor();
                document.querySelector('.app-container').appendChild(confetti);
                
                // Remove confetti after animation
                setTimeout(() => {
                    confetti.remove();
                }, 2000);
            }
            
            // Highlight periodic table
            periodicTable.classList.add('game-complete');
        }

        function getRandomColor() {
            const colors = ['#FF6961', '#77DD77', '#84B6F4', '#FDFD96', '#FFB7C5', '#E6E6FA'];
            return colors[Math.floor(Math.random() * colors.length)];
        }

        // Setup event listeners
        function setupEventListeners() {
            checkButton.addEventListener('click', checkAnswers);
            hintButton.addEventListener('click', provideHint);
            nextLevelButton.addEventListener('click', nextLevel);
            resetButton.addEventListener('click', resetLevel);
        }

        // Initialize game when page loads
        document.addEventListener('DOMContentLoaded', initGame);

        // Simple navigation for bottom nav
        document.addEventListener('DOMContentLoaded', function() {
            const navItems = document.querySelectorAll('.nav-item');
            
            navItems.forEach(item => {
                item.addEventListener('click', function() {
                    navItems.forEach(nav => {
                        nav.classList.remove('active');
                        nav.querySelector('.nav-icon').classList.remove('active');
                    });
                    
                    this.classList.add('active');
                    this.querySelector('.nav-icon').classList.add('active');
                });
            });
        });
    </script>
</body>
</html>
